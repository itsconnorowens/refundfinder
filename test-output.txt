
> flghtly@0.1.0 test
> vitest run


[1m[46m RUN [49m[22m [36mv4.0.3 [39m[90m/Users/connorowens/Desktop/flghtly[39m

[90mstderr[2m | src/lib/__tests__/real-time-integration.test.ts[2m > [22m[2mAirport Operational Data Integration[2m > [22m[2mAirportStatusManager[2m > [22m[2mshould fallback to basic operational status when providers fail
[22m[39mOperational provider TestOperationalProvider failed: Error: Provider failed
    at [90m/Users/connorowens/Desktop/flghtly/[39msrc/lib/__tests__/real-time-integration.test.ts:341:9
    at [90mfile:///Users/connorowens/Desktop/flghtly/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:157:11
    at [90mfile:///Users/connorowens/Desktop/flghtly/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:753:26
    at [90mfile:///Users/connorowens/Desktop/flghtly/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1636:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/connorowens/Desktop/flghtly/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1602:10[90m)[39m
    at runTest [90m(file:///Users/connorowens/Desktop/flghtly/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1309:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///Users/connorowens/Desktop/flghtly/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1468:8[90m)[39m
    at runSuite [90m(file:///Users/connorowens/Desktop/flghtly/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1468:8[90m)[39m

[90mstdout[2m | src/lib/__tests__/real-time-integration.test.ts[2m > [22m[2mEnhanced Claim Processing Integration[2m > [22m[2mshould process claim with real-time verification
[22m[39m{"timestamp":"2025-10-31T20:13:35.098Z","level":"warn","message":"Flight status verification failed:","error":{}}

[90mstdout[2m | src/lib/__tests__/real-time-integration.test.ts[2m > [22m[2mEnhanced Claim Processing Integration[2m > [22m[2mshould handle verification failure gracefully
[22m[39m{"timestamp":"2025-10-31T20:13:35.100Z","level":"warn","message":"Flight status verification failed:","error":{}}

 [31mâ¯[39m src/lib/__tests__/real-time-integration.test.ts [2m([22m[2m15 tests[22m[2m | [22m[31m7 failed[39m[2m)[22m[32m 14[2mms[22m[39m
[31m       [31mÃ—[31m should return flight status from primary provider[39m[32m 3[2mms[22m[39m
[31m       [31mÃ—[31m should fallback to secondary provider when primary fails[39m[32m 0[2mms[22m[39m
[31m       [31mÃ—[31m should validate flight exists correctly[39m[32m 0[2mms[22m[39m
[31m       [31mÃ—[31m should return false when flight does not exist[39m[32m 0[2mms[22m[39m
[31m       [31mÃ—[31m should transform FlightRadar24 data correctly[39m[32m 0[2mms[22m[39m
[31m       [31mÃ—[31m should transform AviationStack data correctly[39m[32m 0[2mms[22m[39m
       [32mâœ“[39m should return combined airport status[32m 2[2mms[22m[39m
       [32mâœ“[39m should fallback to basic operational status when providers fail[32m 1[2mms[22m[39m
       [32mâœ“[39m should classify severe weather correctly[32m 0[2mms[22m[39m
       [32mâœ“[39m should classify normal weather correctly[32m 0[2mms[22m[39m
       [32mâœ“[39m should classify moderate weather correctly[32m 0[2mms[22m[39m
       [32mâœ“[39m should attribute delay to weather with high confidence[32m 0[2mms[22m[39m
       [32mâœ“[39m should attribute delay to operational factors[32m 0[2mms[22m[39m
[31m     [31mÃ—[31m should process claim with real-time verification[39m[32m 3[2mms[22m[39m
     [32mâœ“[39m should handle verification failure gracefully[32m 1[2mms[22m[39m
 [31mâ¯[39m src/lib/__tests__/phase2-integration.test.ts [2m([22m[2m11 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 16[2mms[22m[39m
[31m       [31mÃ—[31m should process complex cancellation scenario with EU261 compensation[39m[32m 7[2mms[22m[39m
[31m       [31mÃ—[31m should process denied boarding scenario with US DOT compensation[39m[32m 3[2mms[22m[39m
[31m       [31mÃ—[31m should process downgrade scenario with fare difference compensation[39m[32m 2[2mms[22m[39m
       [32mâœ“[39m should process delay scenario with extraordinary circumstances (no compensation)[32m 0[2mms[22m[39m
[31m       [31mÃ—[31m should process multiple scenarios and prioritize primary[39m[32m 1[2mms[22m[39m
       [32mâœ“[39m should process scenarios quickly[32m 1[2mms[22m[39m
       [32mâœ“[39m should handle malformed email content gracefully[32m 0[2mms[22m[39m
       [32mâœ“[39m should provide consistent results for same input[32m 0[2mms[22m[39m
       [32mâœ“[39m should handle empty email content[32m 0[2mms[22m[39m
       [32mâœ“[39m should handle null flight data gracefully[32m 0[2mms[22m[39m
       [32mâœ“[39m should handle unsupported regulation gracefully[32m 0[2mms[22m[39m
 [31mâ¯[39m src/lib/__tests__/scenario-detection.test.ts [2m([22m[2m22 tests[22m[2m | [22m[31m9 failed[39m[2m)[22m[32m 17[2mms[22m[39m
       [32mâœ“[39m should detect delay scenario with specific duration[32m 2[2mms[22m[39m
[31m       [31mÃ—[31m should detect extraordinary circumstances[39m[32m 4[2mms[22m[39m
[31m       [31mÃ—[31m should not compensate for delays under 3 hours[39m[32m 3[2mms[22m[39m
       [32mâœ“[39m should detect cancellation scenario[32m 1[2mms[22m[39m
[31m       [31mÃ—[31m should detect cancellation with adequate notice[39m[32m 0[2mms[22m[39m
       [32mâœ“[39m should detect cancellation with extraordinary circumstances[32m 0[2mms[22m[39m
[31m       [31mÃ—[31m should detect involuntary denied boarding[39m[32m 2[2mms[22m[39m
[31m       [31mÃ—[31m should detect voluntary denied boarding[39m[32m 0[2mms[22m[39m
       [32mâœ“[39m should detect aircraft change reason[32m 1[2mms[22m[39m
[31m       [31mÃ—[31m should detect cabin downgrade[39m[32m 0[2mms[22m[39m
       [32mâœ“[39m should detect first to business downgrade[32m 1[2mms[22m[39m
[31m       [31mÃ—[31m should detect premium economy to economy downgrade[39m[32m 0[2mms[22m[39m
       [32mâœ“[39m should detect multiple scenarios and prioritize primary[32m 0[2mms[22m[39m
       [32mâœ“[39m should calculate combined compensation for multiple scenarios[32m 0[2mms[22m[39m
       [32mâœ“[39m should calculate EU261 compensation correctly[32m 0[2mms[22m[39m
       [32mâœ“[39m should calculate UK CAA compensation correctly[32m 0[2mms[22m[39m
[31m       [31mÃ—[31m should calculate US DOT compensation correctly[39m[32m 0[2mms[22m[39m
       [32mâœ“[39m should handle emails with no scenario indicators[32m 0[2mms[22m[39m
       [32mâœ“[39m should handle ambiguous scenario descriptions[32m 0[2mms[22m[39m
       [32mâœ“[39m should handle very long email content[32m 0[2mms[22m[39m
       [32mâœ“[39m should provide confidence scores for detected scenarios[32m 0[2mms[22m[39m
[31m       [31mÃ—[31m should have higher confidence for clear scenario descriptions[39m[32m 0[2mms[22m[39m
 [31mâ¯[39m src/lib/__tests__/cancellation.test.ts [2m([22m[2m22 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 46[2mms[22m[39m
       [32mâœ“[39m should reject compensation for cancellations with >14 days notice[32m 1[2mms[22m[39m
       [32mâœ“[39m should require compensation for 7-14 days notice without suitable alternative[32m 0[2mms[22m[39m
       [32mâœ“[39m should require compensation for <7 days notice without suitable alternative[32m 0[2mms[22m[39m
       [32mâœ“[39m should waive compensation if alternative departs <2h before and arrives <4h after (7-14 days)[32m 0[2mms[22m[39m
       [32mâœ“[39m should require compensation if alternative exceeds timing thresholds (7-14 days)[32m 0[2mms[22m[39m
       [32mâœ“[39m should waive compensation if alternative departs <1h before and arrives <2h after (<7 days)[32m 0[2mms[22m[39m
       [32mâœ“[39m should provide 50% compensation for close alternative (<7 days)[32m 0[2mms[22m[39m
       [32mâœ“[39m should require full compensation if alternative exceeds all thresholds (<7 days)[32m 0[2mms[22m[39m
       [32mâœ“[39m should calculate â‚¬250 for flights â‰¤1500km[32m 14[2mms[22m[39m
       [32mâœ“[39m should calculate â‚¬400 for flights 1500-3500km[32m 16[2mms[22m[39m
       [32mâœ“[39m should calculate â‚¬600 for flights >3500km[32m 1[2mms[22m[39m
       [32mâœ“[39m should reject compensation for extraordinary circumstances[32m 1[2mms[22m[39m
       [32mâœ“[39m should support legacy alternativeOffered and alternativeTiming fields[32m 0[2mms[22m[39m
       [32mâœ“[39m should prioritize new alternativeFlight over legacy fields[32m 0[2mms[22m[39m
[31m       [31mÃ—[31m should apply UK CAA regulations for UK flights[39m[32m 4[2mms[22m[39m
       [32mâœ“[39m should handle missing notice period gracefully[32m 0[2mms[22m[39m
       [32mâœ“[39m should handle alternative flight with partial data[32m 0[2mms[22m[39m
       [32mâœ“[39m should handle invalid distance calculation[32m 3[2mms[22m[39m
       [32mâœ“[39m should not apply cancellation logic to delays[32m 0[2mms[22m[39m
       [32mâœ“[39m should default to delay logic when disruptionType is missing[32m 0[2mms[22m[39m
[31m     [31mÃ—[31m should handle realistic cancellation scenario: Last-minute cancellation with no alternative[39m[32m 2[2mms[22m[39m
[31m     [31mÃ—[31m should handle realistic cancellation scenario: Early cancellation with good alternative[39m[32m 1[2mms[22m[39m
 [31mâ¯[39m src/lib/__tests__/downgrading.test.ts [2m([22m[2m31 tests[22m[2m | [22m[31m8 failed[39m[2m)[22m[32m 11[2mms[22m[39m
       [32mâœ“[39m should calculate correct downgrade levels for all class combinations[32m 1[2mms[22m[39m
       [32mâœ“[39m should return 0 for same class[32m 0[2mms[22m[39m
       [32mâœ“[39m should return negative for upgrades[32m 0[2mms[22m[39m
       [32mâœ“[39m should calculate 30% refund for short-haul flights (â‰¤1500km)[32m 1[2mms[22m[39m
[31m       [31mÃ—[31m should calculate 50% refund for medium-haul flights (1500-3500km)[39m[32m 4[2mms[22m[39m
       [32mâœ“[39m should calculate 75% refund for long-haul flights (>3500km)[32m 0[2mms[22m[39m
       [32mâœ“[39m should handle First to Business downgrade[32m 0[2mms[22m[39m
[31m       [31mÃ—[31m should handle First to Premium Economy downgrade[39m[32m 0[2mms[22m[39m
       [32mâœ“[39m should handle Business to Premium Economy downgrade[32m 0[2mms[22m[39m
       [32mâœ“[39m should handle Business to Economy downgrade[32m 0[2mms[22m[39m
       [32mâœ“[39m should handle Premium Economy to Economy downgrade[32m 0[2mms[22m[39m
       [32mâœ“[39m should still be eligible but request ticket price[32m 0[2mms[22m[39m
       [32mâœ“[39m should handle zero ticket price as missing[32m 0[2mms[22m[39m
       [32mâœ“[39m should handle negative ticket price as missing[32m 0[2mms[22m[39m
       [32mâœ“[39m should not be eligible for same class[32m 0[2mms[22m[39m
[31m       [31mÃ—[31m should not be eligible for upgrades[39m[32m 0[2mms[22m[39m
       [32mâœ“[39m should not be eligible when bookedClass is missing[32m 0[2mms[22m[39m
[31m       [31mÃ—[31m should not be eligible when actualClass is missing[39m[32m 0[2mms[22m[39m
[31m       [31mÃ—[31m should cap compensation at ticket price for very cheap tickets[39m[32m 0[2mms[22m[39m
       [32mâœ“[39m should ALWAYS be eligible regardless of delay reason[32m 0[2mms[22m[39m
[31m       [31mÃ—[31m should be eligible even with technical issues[39m[32m 0[2mms[22m[39m
     [32mâœ“[39m should calculate compensation in GBP for UK flights[32m 0[2mms[22m[39m
     [32mâœ“[39m should handle 50% refund for medium-haul UK flights[32m 0[2mms[22m[39m
     [32mâœ“[39m should indicate airline-specific policy for US flights[32m 0[2mms[22m[39m
     [32mâœ“[39m should handle missing class information for US flights[32m 0[2mms[22m[39m
     [32mâœ“[39m should not be eligible for upgrades in US[32m 0[2mms[22m[39m
     [32mâœ“[39m should route to downgrading eligibility when disruptionType is downgrading[32m 0[2mms[22m[39m
[31m     [31mÃ—[31m should handle exact 1500km boundary (short-haul tier)[39m[32m 1[2mms[22m[39m
     [32mâœ“[39m should handle very large ticket prices[32m 0[2mms[22m[39m
[31m     [31mÃ—[31m should round compensation amounts correctly[39m[32m 0[2mms[22m[39m
     [32mâœ“[39m should handle fractional ticket prices[32m 0[2mms[22m[39m
[90mstderr[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould process successful payment and prepare claim
[22m[39mSendGrid API key not configured. SendGrid email sending will be disabled.

[90mstdout[2m | src/lib/__tests__/claim-filing-service.test.ts[2m > [22m[2mClaim Filing Service[2m > [22m[2mmarkClaimAsFiled[2m > [22m[2mshould return false if claim is not found
[22m[39m{"timestamp":"2025-10-31T20:13:35.225Z","level":"error","message":"Error marking claim as filed:","error":{"message":"Claim not found","stack":"Error: Claim not found\n    at Module.markClaimAsFiled (/Users/connorowens/Desktop/flghtly/src/lib/claim-filing-service.ts:242:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/connorowens/Desktop/flghtly/src/lib/__tests__/claim-filing-service.test.ts:254:22\n    at file:///Users/connorowens/Desktop/flghtly/node_modules/@vitest/runner/dist/index.js:753:20","name":"Error"}}

[90mstdout[2m | src/lib/__tests__/claim-filing-service.test.ts[2m > [22m[2mClaim Filing Service[2m > [22m[2mmarkClaimAsFiled[2m > [22m[2mshould return false if update fails
[22m[39m{"timestamp":"2025-10-31T20:13:35.227Z","level":"error","message":"Error marking claim as filed:","error":{"message":"Update failed","stack":"Error: Update failed\n    at /Users/connorowens/Desktop/flghtly/src/lib/__tests__/claim-filing-service.test.ts:272:47\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Users/connorowens/Desktop/flghtly/node_modules/@vitest/runner/dist/index.js:753:20","name":"Error"}}

[90mstdout[2m | src/lib/__tests__/claim-filing-service.test.ts[2m > [22m[2mClaim Filing Service[2m > [22m[2mscheduleFollowUp[2m > [22m[2mshould return false if claim is not found
[22m[39m{"timestamp":"2025-10-31T20:13:35.233Z","level":"error","message":"Error scheduling follow-up:","error":{"message":"Claim not found","stack":"Error: Claim not found\n    at Module.scheduleFollowUp (/Users/connorowens/Desktop/flghtly/src/lib/claim-filing-service.ts:401:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/connorowens/Desktop/flghtly/src/lib/__tests__/claim-filing-service.test.ts:378:22\n    at file:///Users/connorowens/Desktop/flghtly/node_modules/@vitest/runner/dist/index.js:753:20","name":"Error"}}

[90mstdout[2m | src/lib/__tests__/claim-filing-service.test.ts[2m > [22m[2mClaim Filing Service[2m > [22m[2mprocessAutomaticClaimPreparation[2m > [22m[2mshould process claim preparation successfully
[22m[39m{"timestamp":"2025-10-31T20:13:35.235Z","level":"info","message":"Claim  automatically prepared for filing","claimId":"CLM001"}

[90mstdout[2m | src/lib/__tests__/claim-filing-service.test.ts[2m > [22m[2mClaim Filing Service[2m > [22m[2mprocessAutomaticClaimPreparation[2m > [22m[2mshould return false if validation fails
[22m[39mClaim CLM001 validation failed: [ [32m'Claim not found'[39m ]

[90mstdout[2m | src/lib/__tests__/claim-filing-service.test.ts[2m > [22m[2mClaim Filing Service[2m > [22m[2mgetClaimFilingStats[2m > [22m[2mshould return filing statistics
[22m[39m{"timestamp":"2025-10-31T20:13:35.239Z","level":"error","message":"Error fetching claims ready to file:","error":{"message":"Cannot read properties of undefined (reading 'map')","stack":"TypeError: Cannot read properties of undefined (reading 'map')\n    at getAllClaimsReadyToFile (/Users/connorowens/Desktop/flghtly/src/lib/claim-filing-service.ts:363:20)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Module.getClaimFilingStats (/Users/connorowens/Desktop/flghtly/src/lib/claim-filing-service.ts:654:25)\n    at /Users/connorowens/Desktop/flghtly/src/lib/__tests__/claim-filing-service.test.ts:451:21\n    at file:///Users/connorowens/Desktop/flghtly/node_modules/@vitest/runner/dist/index.js:753:20","name":"TypeError"}}

[90mstdout[2m | src/lib/__tests__/claim-filing-service.test.ts[2m > [22m[2mClaim Filing Service[2m > [22m[2mgetClaimFilingStats[2m > [22m[2mshould return filing statistics
[22m[39m{"timestamp":"2025-10-31T20:13:35.239Z","level":"error","message":"Error fetching claims needing follow-up:","error":{"message":"Cannot read properties of undefined (reading 'map')","stack":"TypeError: Cannot read properties of undefined (reading 'map')\n    at getClaimsNeedingFollowUp (/Users/connorowens/Desktop/flghtly/src/lib/claim-filing-service.ts:379:20)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Module.getClaimFilingStats (/Users/connorowens/Desktop/flghtly/src/lib/claim-filing-service.ts:655:29)\n    at /Users/connorowens/Desktop/flghtly/src/lib/__tests__/claim-filing-service.test.ts:451:21\n    at file:///Users/connorowens/Desktop/flghtly/node_modules/@vitest/runner/dist/index.js:753:20","name":"TypeError"}}

[90mstdout[2m | src/lib/__tests__/claim-filing-service.test.ts[2m > [22m[2mClaim Filing Service[2m > [22m[2mgetClaimFilingStats[2m > [22m[2mshould return filing statistics
[22m[39m{"timestamp":"2025-10-31T20:13:35.239Z","level":"error","message":"Error getting claim filing stats:","error":{"message":"Cannot read properties of undefined (reading 'length')","stack":"TypeError: Cannot read properties of undefined (reading 'length')\n    at Module.getClaimFilingStats (/Users/connorowens/Desktop/flghtly/src/lib/claim-filing-service.ts:662:24)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/connorowens/Desktop/flghtly/src/lib/__tests__/claim-filing-service.test.ts:451:21\n    at file:///Users/connorowens/Desktop/flghtly/node_modules/@vitest/runner/dist/index.js:753:20","name":"TypeError"}}

 [31mâ¯[39m src/lib/__tests__/claim-filing-service.test.ts [2m([22m[2m20 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 56[2mms[22m[39m
       [32mâœ“[39m should validate a claim that is ready for filing[32m 5[2mms[22m[39m
       [32mâœ“[39m should fail validation if claim is not found[32m 1[2mms[22m[39m
       [32mâœ“[39m should fail validation if airline config is not found[32m 1[2mms[22m[39m
       [32mâœ“[39m should fail validation if required documents are missing[32m 2[2mms[22m[39m
       [32mâœ“[39m should fail validation if payment is not confirmed[32m 1[2mms[22m[39m
       [32mâœ“[39m should generate submission for valid claim[32m 7[2mms[22m[39m
       [32mâœ“[39m should fail if claim validation fails[32m 5[2mms[22m[39m
       [32mâœ“[39m should mark claim as filed successfully[32m 2[2mms[22m[39m
       [32mâœ“[39m should return false if claim is not found[32m 5[2mms[22m[39m
       [32mâœ“[39m should return false if update fails[32m 2[2mms[22m[39m
       [32mâœ“[39m should update claim status successfully[32m 1[2mms[22m[39m
       [32mâœ“[39m should handle different status types correctly[32m 3[2mms[22m[39m
       [32mâœ“[39m should schedule follow-up successfully[32m 1[2mms[22m[39m
       [32mâœ“[39m should return false if claim is not found[32m 1[2mms[22m[39m
       [32mâœ“[39m should process claim preparation successfully[32m 3[2mms[22m[39m
       [32mâœ“[39m should return false if validation fails[32m 2[2mms[22m[39m
[31m       [31mÃ—[31m should return filing statistics[39m[32m 3[2mms[22m[39m
[31m       [31mÃ—[31m should return claims by status[39m[32m 5[2mms[22m[39m
       [32mâœ“[39m should return all claims ready to file[32m 2[2mms[22m[39m
       [32mâœ“[39m should return claims needing follow-up[32m 2[2mms[22m[39m
 [32mâœ“[39m src/lib/__tests__/airports.test.ts [2m([22m[2m38 tests[22m[2m)[22m[32m 160[2mms[22m[39m
[90mstdout[2m | src/app/api/__tests__/admin-api.test.ts[2m > [22m[2mAdmin API Integration Tests[2m > [22m[2mGET /api/admin/claims[2m > [22m[2mshould return claims with status filter
[22m[39m{"timestamp":"2025-10-31T20:13:35.779Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/admin/claims","category":"http","data":{"method":"GET","url":"http://localhost:3000/api/admin/claims?status=ready_to_file"}}

[90mstdout[2m | src/app/api/__tests__/admin-api.test.ts[2m > [22m[2mAdmin API Integration Tests[2m > [22m[2mGET /api/admin/claims[2m > [22m[2mshould return all claims when no status filter
[22m[39m{"timestamp":"2025-10-31T20:13:35.800Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/admin/claims","category":"http","data":{"method":"GET","url":"http://localhost:3000/api/admin/claims"}}

[90mstdout[2m | src/app/api/__tests__/admin-api.test.ts[2m > [22m[2mAdmin API Integration Tests[2m > [22m[2mGET /api/admin/claims[2m > [22m[2mshould filter by airline
[22m[39m{"timestamp":"2025-10-31T20:13:35.805Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/admin/claims","category":"http","data":{"method":"GET","url":"http://localhost:3000/api/admin/claims?airline=British"}}

[90mstdout[2m | src/app/api/__tests__/admin-api.test.ts[2m > [22m[2mAdmin API Integration Tests[2m > [22m[2mGET /api/admin/claims[2m > [22m[2mshould handle pagination
[22m[39m{"timestamp":"2025-10-31T20:13:35.813Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/admin/claims","category":"http","data":{"method":"GET","url":"http://localhost:3000/api/admin/claims?limit=10&offset=0"}}

[90mstdout[2m | src/app/api/__tests__/admin-api.test.ts[2m > [22m[2mAdmin API Integration Tests[2m > [22m[2mGET /api/admin/claims[2m > [22m[2mshould handle errors gracefully
[22m[39m{"timestamp":"2025-10-31T20:13:35.815Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/admin/claims","category":"http","data":{"method":"GET","url":"http://localhost:3000/api/admin/claims"}}

[90mstdout[2m | src/app/api/__tests__/admin-api.test.ts[2m > [22m[2mAdmin API Integration Tests[2m > [22m[2mGET /api/admin/claims[2m > [22m[2mshould handle errors gracefully
[22m[39m{"timestamp":"2025-10-31T20:13:35.816Z","level":"error","message":"[Error Tracking]","tags":{"route":"/api/admin/claims","method":"GET","service":"admin","operation":"claim_management"},"extra":{"url":"http://localhost:3000/api/admin/claims","headers":{}},"error":{"message":"Database error","stack":"Error: Database error\n    at /Users/connorowens/Desktop/flghtly/src/app/api/__tests__/admin-api.test.ts:161:9\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Users/connorowens/Desktop/flghtly/node_modules/@vitest/runner/dist/index.js:753:20","name":"Error"}}

[90mstdout[2m | src/app/api/__tests__/cron-job.test.ts[2m > [22m[2mCron Job Integration Tests[2m > [22m[2mPOST /api/cron/check-follow-ups[2m > [22m[2mshould process overdue claims and send alerts
[22m[39m{"timestamp":"2025-10-31T20:13:35.814Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/cron/check-follow-ups","category":"http","data":{"method":"POST","url":"http://localhost:3000/api/cron/check-follow-ups"}}
{"timestamp":"2025-10-31T20:13:35.818Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Starting follow-up check cron job","category":"cron"}

[90mstdout[2m | src/app/api/__tests__/cron-job.test.ts[2m > [22m[2mCron Job Integration Tests[2m > [22m[2mPOST /api/cron/check-follow-ups[2m > [22m[2mshould process overdue claims and send alerts
[22m[39m{"timestamp":"2025-10-31T20:13:35.819Z","level":"info","message":"Sent overdue alert for  claims","length":1}

[90mstdout[2m | src/app/api/__tests__/admin-api.test.ts[2m > [22m[2mAdmin API Integration Tests[2m > [22m[2mGET /api/admin/claims/ready-to-file[2m > [22m[2mshould return claims ready to file
[22m[39m{"timestamp":"2025-10-31T20:13:35.820Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/admin/claims","category":"http","data":{"method":"GET","url":"http://localhost:3000/api/admin/claims/ready-to-file"}}

[90mstdout[2m | src/app/api/__tests__/admin-api.test.ts[2m > [22m[2mAdmin API Integration Tests[2m > [22m[2mGET /api/admin/claims/ready-to-file[2m > [22m[2mshould return claims ready to file
[22m[39m{"timestamp":"2025-10-31T20:13:35.820Z","level":"error","message":"[Error Tracking]","tags":{"route":"/api/admin/claims","method":"GET","service":"admin","operation":"claim_management"},"extra":{"url":"http://localhost:3000/api/admin/claims/ready-to-file","headers":{}},"error":{"message":"Database error","stack":"Error: Database error\n    at /Users/connorowens/Desktop/flghtly/src/app/api/__tests__/admin-api.test.ts:161:9\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Users/connorowens/Desktop/flghtly/node_modules/@vitest/runner/dist/index.js:753:20","name":"Error"}}

[90mstdout[2m | src/app/api/__tests__/cron-job.test.ts[2m > [22m[2mCron Job Integration Tests[2m > [22m[2mPOST /api/cron/check-follow-ups[2m > [22m[2mshould process overdue claims and send alerts
[22m[39m{"timestamp":"2025-10-31T20:13:35.822Z","level":"error","message":"[Error Tracking]","tags":{"cron_task":"follow_up_claims"},"extra":{},"error":{"message":"Cannot read properties of undefined (reading 'length')","stack":"TypeError: Cannot read properties of undefined (reading 'length')\n    at POST.route (/Users/connorowens/Desktop/flghtly/src/app/api/cron/check-follow-ups/route.ts:84:47)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/connorowens/Desktop/flghtly/src/lib/error-tracking.ts:329:24\n    at /Users/connorowens/Desktop/flghtly/src/app/api/__tests__/cron-job.test.ts:77:24\n    at file:///Users/connorowens/Desktop/flghtly/node_modules/@vitest/runner/dist/index.js:753:20","name":"TypeError"}}
{"timestamp":"2025-10-31T20:13:35.822Z","level":"error","message":"Error checking follow-up claims:","error":{"message":"Cannot read properties of undefined (reading 'length')","stack":"TypeError: Cannot read properties of undefined (reading 'length')\n    at POST.route (/Users/connorowens/Desktop/flghtly/src/app/api/cron/check-follow-ups/route.ts:84:47)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/connorowens/Desktop/flghtly/src/lib/error-tracking.ts:329:24\n    at /Users/connorowens/Desktop/flghtly/src/app/api/__tests__/cron-job.test.ts:77:24\n    at file:///Users/connorowens/Desktop/flghtly/node_modules/@vitest/runner/dist/index.js:753:20","name":"TypeError"}}

[90mstdout[2m | src/app/api/__tests__/admin-api.test.ts[2m > [22m[2mAdmin API Integration Tests[2m > [22m[2mGET /api/admin/claims/stats[2m > [22m[2mshould return claim filing statistics
[22m[39m{"timestamp":"2025-10-31T20:13:35.828Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/admin/claims","category":"http","data":{"method":"GET","url":"http://localhost:3000/api/admin/claims/stats"}}

[90mstdout[2m | src/app/api/__tests__/admin-api.test.ts[2m > [22m[2mAdmin API Integration Tests[2m > [22m[2mGET /api/admin/claims/stats[2m > [22m[2mshould return claim filing statistics
[22m[39m{"timestamp":"2025-10-31T20:13:35.828Z","level":"error","message":"[Error Tracking]","tags":{"route":"/api/admin/claims","method":"GET","service":"admin","operation":"claim_management"},"extra":{"url":"http://localhost:3000/api/admin/claims/stats","headers":{}},"error":{"message":"Database error","stack":"Error: Database error\n    at /Users/connorowens/Desktop/flghtly/src/app/api/__tests__/admin-api.test.ts:161:9\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Users/connorowens/Desktop/flghtly/node_modules/@vitest/runner/dist/index.js:753:20","name":"Error"}}

[90mstdout[2m | src/app/api/__tests__/cron-job.test.ts[2m > [22m[2mCron Job Integration Tests[2m > [22m[2mPOST /api/cron/check-follow-ups[2m > [22m[2mshould process follow-up claims and send alerts
[22m[39m{"timestamp":"2025-10-31T20:13:35.828Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/cron/check-follow-ups","category":"http","data":{"method":"POST","url":"http://localhost:3000/api/cron/check-follow-ups"}}
{"timestamp":"2025-10-31T20:13:35.828Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Starting follow-up check cron job","category":"cron"}

 [32mâœ“[39m __tests__/lib/validation.test.ts [2m([22m[2m41 tests[22m[2m)[22m[32m 8[2mms[22m[39m
[90mstdout[2m | src/app/api/__tests__/admin-api.test.ts[2m > [22m[2mAdmin API Integration Tests[2m > [22m[2mGET /api/admin/claims/[id][2m > [22m[2mshould return specific claim details
[22m[39m{"timestamp":"2025-10-31T20:13:35.848Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Fetching claim details","category":"admin","data":{"claimId":"CLM001"}}

[90mstdout[2m | src/app/api/__tests__/admin-api.test.ts[2m > [22m[2mAdmin API Integration Tests[2m > [22m[2mGET /api/admin/claims/[id][2m > [22m[2mshould return 404 for non-existent claim
[22m[39m{"timestamp":"2025-10-31T20:13:35.850Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Fetching claim details","category":"admin","data":{"claimId":"NONEXISTENT"}}

[90mstdout[2m | src/app/api/__tests__/cron-job.test.ts[2m > [22m[2mCron Job Integration Tests[2m > [22m[2mPOST /api/cron/check-follow-ups[2m > [22m[2mshould process follow-up claims and send alerts
[22m[39m{"timestamp":"2025-10-31T20:13:35.850Z","level":"info","message":"Sent follow-up alert for  claims","length":1}

 [32mâœ“[39m src/lib/__tests__/document-generator.test.ts [2m([22m[2m25 tests[22m[2m)[22m[32m 32[2mms[22m[39m
 [32mâœ“[39m src/lib/__tests__/utils.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 7[2mms[22m[39m
[90mstdout[2m | src/app/api/__tests__/cron-job.test.ts[2m > [22m[2mCron Job Integration Tests[2m > [22m[2mPOST /api/cron/check-follow-ups[2m > [22m[2mshould process both overdue and follow-up claims
[22m[39m{"timestamp":"2025-10-31T20:13:35.870Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/cron/check-follow-ups","category":"http","data":{"method":"POST","url":"http://localhost:3000/api/cron/check-follow-ups"}}
{"timestamp":"2025-10-31T20:13:35.870Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Starting follow-up check cron job","category":"cron"}

[90mstdout[2m | src/app/api/__tests__/cron-job.test.ts[2m > [22m[2mCron Job Integration Tests[2m > [22m[2mPOST /api/cron/check-follow-ups[2m > [22m[2mshould process both overdue and follow-up claims
[22m[39m{"timestamp":"2025-10-31T20:13:35.870Z","level":"info","message":"Sent overdue alert for  claims","length":1}

[90mstdout[2m | src/app/api/__tests__/cron-job.test.ts[2m > [22m[2mCron Job Integration Tests[2m > [22m[2mPOST /api/cron/check-follow-ups[2m > [22m[2mshould process both overdue and follow-up claims
[22m[39m{"timestamp":"2025-10-31T20:13:35.871Z","level":"info","message":"Sent follow-up alert for  claims","length":1}

[90mstdout[2m | src/app/api/__tests__/cron-job.test.ts[2m > [22m[2mCron Job Integration Tests[2m > [22m[2mPOST /api/cron/check-follow-ups[2m > [22m[2mshould handle no claims needing action
[22m[39m{"timestamp":"2025-10-31T20:13:35.876Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/cron/check-follow-ups","category":"http","data":{"method":"POST","url":"http://localhost:3000/api/cron/check-follow-ups"}}
{"timestamp":"2025-10-31T20:13:35.876Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Starting follow-up check cron job","category":"cron"}

[90mstdout[2m | src/app/api/__tests__/cron-job.test.ts[2m > [22m[2mCron Job Integration Tests[2m > [22m[2mPOST /api/cron/check-follow-ups[2m > [22m[2mshould require valid authorization
[22m[39m{"timestamp":"2025-10-31T20:13:35.879Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/cron/check-follow-ups","category":"http","data":{"method":"POST","url":"http://localhost:3000/api/cron/check-follow-ups"}}

[90mstdout[2m | src/app/api/__tests__/cron-job.test.ts[2m > [22m[2mCron Job Integration Tests[2m > [22m[2mPOST /api/cron/check-follow-ups[2m > [22m[2mshould require valid authorization
[22m[39m{"timestamp":"2025-10-31T20:13:35.880Z","level":"info","message":"[Error Tracking]","messagecontext":"API route returned 401: /api/cron/check-follow-ups","context":{"level":"warning","tags":{"route":"/api/cron/check-follow-ups","status":"401","service":"cron","operation":"follow_ups"}}}

[90mstdout[2m | src/app/api/__tests__/cron-job.test.ts[2m > [22m[2mCron Job Integration Tests[2m > [22m[2mPOST /api/cron/check-follow-ups[2m > [22m[2mshould handle missing authorization header
[22m[39m{"timestamp":"2025-10-31T20:13:35.887Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/cron/check-follow-ups","category":"http","data":{"method":"POST","url":"http://localhost:3000/api/cron/check-follow-ups"}}

[90mstdout[2m | src/app/api/__tests__/cron-job.test.ts[2m > [22m[2mCron Job Integration Tests[2m > [22m[2mPOST /api/cron/check-follow-ups[2m > [22m[2mshould handle missing authorization header
[22m[39m{"timestamp":"2025-10-31T20:13:35.887Z","level":"info","message":"[Error Tracking]","messagecontext":"API route returned 401: /api/cron/check-follow-ups","context":{"level":"warning","tags":{"route":"/api/cron/check-follow-ups","status":"401","service":"cron","operation":"follow_ups"}}}

[90mstdout[2m | src/app/api/__tests__/cron-job.test.ts[2m > [22m[2mCron Job Integration Tests[2m > [22m[2mPOST /api/cron/check-follow-ups[2m > [22m[2mshould handle missing cron secret environment variable
[22m[39m{"timestamp":"2025-10-31T20:13:35.889Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/cron/check-follow-ups","category":"http","data":{"method":"POST","url":"http://localhost:3000/api/cron/check-follow-ups"}}

[90mstdout[2m | src/app/api/__tests__/cron-job.test.ts[2m > [22m[2mCron Job Integration Tests[2m > [22m[2mPOST /api/cron/check-follow-ups[2m > [22m[2mshould handle missing cron secret environment variable
[22m[39m{"timestamp":"2025-10-31T20:13:35.889Z","level":"info","message":"[Error Tracking]","messagecontext":"API route returned 401: /api/cron/check-follow-ups","context":{"level":"warning","tags":{"route":"/api/cron/check-follow-ups","status":"401","service":"cron","operation":"follow_ups"}}}

 [32mâœ“[39m src/lib/__tests__/admin-auth.test.ts [2m([22m[2m26 tests[22m[2m)[22m[32m 28[2mms[22m[39m
[90mstdout[2m | src/app/api/__tests__/cron-job.test.ts[2m > [22m[2mCron Job Integration Tests[2m > [22m[2mPOST /api/cron/check-follow-ups[2m > [22m[2mshould handle missing admin email configuration
[22m[39m{"timestamp":"2025-10-31T20:13:35.899Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/cron/check-follow-ups","category":"http","data":{"method":"POST","url":"http://localhost:3000/api/cron/check-follow-ups"}}
{"timestamp":"2025-10-31T20:13:35.899Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Starting follow-up check cron job","category":"cron"}
{"timestamp":"2025-10-31T20:13:35.899Z","level":"info","message":"No admin email configured, skipping alerts"}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould process successful payment and prepare claim
[22m[39m{"timestamp":"2025-10-31T20:13:35.903Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/webhooks/stripe","category":"http","data":{"method":"POST","url":"http://localhost:3000/api/webhooks/stripe"}}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould process successful payment and prepare claim
[22m[39m{"timestamp":"2025-10-31T20:13:35.908Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Processing Stripe webhook event","category":"webhook","data":{"event_type":"payment_intent.succeeded"}}
{"timestamp":"2025-10-31T20:13:35.908Z","level":"info","message":"Payment succeeded","paymentIntentId":"pi_123"}
{"timestamp":"2025-10-31T20:13:35.908Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Updating payment status","category":"airtable","data":{"paymentIntentId":"pi_123"}}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould process successful payment and prepare claim
[22m[39m{"timestamp":"2025-10-31T20:13:35.909Z","level":"info","message":"Claim marked as validated after successful payment","claimId":"CLM001"}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould process successful payment and prepare claim
[22m[39m{"timestamp":"2025-10-31T20:13:35.910Z","level":"warn","message":"SendGrid not configured. Email not sent."}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould process successful payment and prepare claim
[22m[39m{"timestamp":"2025-10-31T20:13:35.910Z","level":"info","message":"Payment confirmation email sent","claimId":"CLM001"}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould process successful payment and prepare claim
[22m[39m{"timestamp":"2025-10-31T20:13:35.910Z","level":"info","message":"Claim automatically prepared for filing","claimId":"CLM001"}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould process successful payment and prepare claim
[22m[39m{"timestamp":"2025-10-31T20:13:35.910Z","level":"info","message":"Admin alert sent","claimId":"CLM001"}

[90mstdout[2m | src/app/api/__tests__/cron-job.test.ts[2m > [22m[2mCron Job Integration Tests[2m > [22m[2mPOST /api/cron/check-follow-ups[2m > [22m[2mshould handle email sending failures gracefully
[22m[39m{"timestamp":"2025-10-31T20:13:35.911Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/cron/check-follow-ups","category":"http","data":{"method":"POST","url":"http://localhost:3000/api/cron/check-follow-ups"}}
{"timestamp":"2025-10-31T20:13:35.911Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Starting follow-up check cron job","category":"cron"}

[90mstdout[2m | src/app/api/__tests__/cron-job.test.ts[2m > [22m[2mCron Job Integration Tests[2m > [22m[2mPOST /api/cron/check-follow-ups[2m > [22m[2mshould handle email sending failures gracefully
[22m[39m{"timestamp":"2025-10-31T20:13:35.911Z","level":"error","message":"[Error Tracking]","tags":{"cron_task":"overdue_claims"},"extra":{},"error":{"message":"Email service unavailable","stack":"Error: Email service unavailable\n    at /Users/connorowens/Desktop/flghtly/src/app/api/__tests__/cron-job.test.ts:295:9\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Users/connorowens/Desktop/flghtly/node_modules/@vitest/runner/dist/index.js:753:20","name":"Error"}}
{"timestamp":"2025-10-31T20:13:35.911Z","level":"error","message":"Error checking overdue claims:","error":{"message":"Email service unavailable","stack":"Error: Email service unavailable\n    at /Users/connorowens/Desktop/flghtly/src/app/api/__tests__/cron-job.test.ts:295:9\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Users/connorowens/Desktop/flghtly/node_modules/@vitest/runner/dist/index.js:753:20","name":"Error"}}

 [32mâœ“[39m src/lib/__tests__/airline-config.test.ts [2m([22m[2m44 tests[22m[2m)[22m[32m 54[2mms[22m[39m
[90mstdout[2m | src/app/api/__tests__/cron-job.test.ts[2m > [22m[2mCron Job Integration Tests[2m > [22m[2mPOST /api/cron/check-follow-ups[2m > [22m[2mshould handle database errors gracefully
[22m[39m{"timestamp":"2025-10-31T20:13:35.919Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/cron/check-follow-ups","category":"http","data":{"method":"POST","url":"http://localhost:3000/api/cron/check-follow-ups"}}
{"timestamp":"2025-10-31T20:13:35.919Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Starting follow-up check cron job","category":"cron"}

[90mstdout[2m | src/app/api/__tests__/cron-job.test.ts[2m > [22m[2mCron Job Integration Tests[2m > [22m[2mPOST /api/cron/check-follow-ups[2m > [22m[2mshould handle database errors gracefully
[22m[39m{"timestamp":"2025-10-31T20:13:35.919Z","level":"error","message":"[Error Tracking]","tags":{"cron_task":"overdue_claims"},"extra":{},"error":{"message":"Database connection failed","stack":"Error: Database connection failed\n    at /Users/connorowens/Desktop/flghtly/src/app/api/__tests__/cron-job.test.ts:324:9\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Users/connorowens/Desktop/flghtly/node_modules/@vitest/runner/dist/index.js:753:20","name":"Error"}}
{"timestamp":"2025-10-31T20:13:35.919Z","level":"error","message":"Error checking overdue claims:","error":{"message":"Database connection failed","stack":"Error: Database connection failed\n    at /Users/connorowens/Desktop/flghtly/src/app/api/__tests__/cron-job.test.ts:324:9\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Users/connorowens/Desktop/flghtly/node_modules/@vitest/runner/dist/index.js:753:20","name":"Error"}}

 [31mâ¯[39m src/app/api/__tests__/create-claim.test.ts [2m([22m[2m6 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 19[2mms[22m[39m
     [32mâœ“[39m should return 400 if required fields are missing[32m 6[2mms[22m[39m
[31m     [31mÃ—[31m should return 400 if files are missing[39m[32m 7[2mms[22m[39m
[31m     [31mÃ—[31m should return 400 for invalid file types[39m[32m 4[2mms[22m[39m
     [32mâœ“[39m should return not eligible for delays less than 3 hours[32m 0[2mms[22m[39m
     [32mâœ“[39m should calculate higher compensation for longer delays[32m 0[2mms[22m[39m
     [32mâœ“[39m should parse delay duration correctly[32m 0[2mms[22m[39m
[90mstdout[2m | src/app/api/__tests__/cron-job.test.ts[2m > [22m[2mCron Job Integration Tests[2m > [22m[2mPOST /api/cron/check-follow-ups[2m > [22m[2mshould group follow-up claims by airline
[22m[39m{"timestamp":"2025-10-31T20:13:35.926Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/cron/check-follow-ups","category":"http","data":{"method":"POST","url":"http://localhost:3000/api/cron/check-follow-ups"}}
{"timestamp":"2025-10-31T20:13:35.927Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Starting follow-up check cron job","category":"cron"}

[90mstdout[2m | src/app/api/__tests__/cron-job.test.ts[2m > [22m[2mCron Job Integration Tests[2m > [22m[2mPOST /api/cron/check-follow-ups[2m > [22m[2mshould group follow-up claims by airline
[22m[39m{"timestamp":"2025-10-31T20:13:35.929Z","level":"info","message":"Sent follow-up alert for  claims","length":3}

[90mstdout[2m | src/app/api/__tests__/cron-job.test.ts[2m > [22m[2mCron Job Integration Tests[2m > [22m[2mPOST /api/cron/check-follow-ups[2m > [22m[2mshould calculate days overdue correctly
[22m[39m{"timestamp":"2025-10-31T20:13:35.935Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/cron/check-follow-ups","category":"http","data":{"method":"POST","url":"http://localhost:3000/api/cron/check-follow-ups"}}
{"timestamp":"2025-10-31T20:13:35.935Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Starting follow-up check cron job","category":"cron"}

[90mstdout[2m | src/app/api/__tests__/cron-job.test.ts[2m > [22m[2mCron Job Integration Tests[2m > [22m[2mPOST /api/cron/check-follow-ups[2m > [22m[2mshould calculate days overdue correctly
[22m[39m{"timestamp":"2025-10-31T20:13:35.935Z","level":"info","message":"Sent overdue alert for  claims","length":1}

 [32mâœ“[39m src/app/api/__tests__/cron-job.test.ts [2m([22m[2m13 tests[22m[2m)[22m[33m 921[2mms[22m[39m
       [33m[2mâœ“[22m[39m should process overdue claims and send alerts [33m 809[2mms[22m[39m
 [32mâœ“[39m src/components/__tests__/ui-components.test.tsx [2m([22m[2m10 tests[22m[2m)[22m[32m 54[2mms[22m[39m
[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle payment_intent.succeeded event
[22m[39m{"timestamp":"2025-10-31T20:13:35.952Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/webhooks/stripe","category":"http","data":{"method":"POST","url":"http://localhost:3000/api/webhooks/stripe"}}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle payment_intent.succeeded event
[22m[39m{"timestamp":"2025-10-31T20:13:35.952Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Processing Stripe webhook event","category":"webhook","data":{"event_type":"payment_intent.succeeded"}}
{"timestamp":"2025-10-31T20:13:35.952Z","level":"info","message":"Payment succeeded","paymentIntentId":"pi_123"}
{"timestamp":"2025-10-31T20:13:35.952Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Updating payment status","category":"airtable","data":{"paymentIntentId":"pi_123"}}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle payment_intent.succeeded event
[22m[39m{"timestamp":"2025-10-31T20:13:35.952Z","level":"info","message":"Claim marked as validated after successful payment","claimId":"CLM001"}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle payment_intent.succeeded event
[22m[39m{"timestamp":"2025-10-31T20:13:35.952Z","level":"warn","message":"SendGrid not configured. Email not sent."}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle payment_intent.succeeded event
[22m[39m{"timestamp":"2025-10-31T20:13:35.952Z","level":"info","message":"Payment confirmation email sent","claimId":"CLM001"}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle payment_intent.succeeded event
[22m[39m{"timestamp":"2025-10-31T20:13:35.952Z","level":"info","message":"Claim automatically prepared for filing","claimId":"CLM001"}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle payment_intent.succeeded event
[22m[39m{"timestamp":"2025-10-31T20:13:35.952Z","level":"info","message":"Admin alert sent","claimId":"CLM001"}

[90mstdout[2m | src/app/api/__tests__/admin-api.test.ts[2m > [22m[2mAdmin API Integration Tests[2m > [22m[2mGET /api/admin/airlines[2m > [22m[2mshould return all airline configurations
[22m[39m{"timestamp":"2025-10-31T20:13:35.953Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/admin/airlines","category":"http","data":{"method":"GET","url":"http://localhost:3000/api/admin/airlines"}}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould ignore non-payment events
[22m[39m{"timestamp":"2025-10-31T20:13:35.954Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/webhooks/stripe","category":"http","data":{"method":"POST","url":"http://localhost:3000/api/webhooks/stripe"}}

[90mstdout[2m | src/app/api/__tests__/admin-api.test.ts[2m > [22m[2mAdmin API Integration Tests[2m > [22m[2mGET /api/admin/airlines[2m > [22m[2mshould filter airlines by submission method
[22m[39m{"timestamp":"2025-10-31T20:13:35.954Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/admin/airlines","category":"http","data":{"method":"GET","url":"http://localhost:3000/api/admin/airlines?submissionMethod=email"}}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould ignore non-payment events
[22m[39m{"timestamp":"2025-10-31T20:13:35.954Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Processing Stripe webhook event","category":"webhook","data":{"event_type":"customer.created"}}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle missing claim gracefully
[22m[39m{"timestamp":"2025-10-31T20:13:35.955Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/webhooks/stripe","category":"http","data":{"method":"POST","url":"http://localhost:3000/api/webhooks/stripe"}}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle missing claim gracefully
[22m[39m{"timestamp":"2025-10-31T20:13:35.956Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Processing Stripe webhook event","category":"webhook","data":{"event_type":"payment_intent.succeeded"}}
{"timestamp":"2025-10-31T20:13:35.956Z","level":"info","message":"Payment succeeded","paymentIntentId":"pi_123"}
{"timestamp":"2025-10-31T20:13:35.956Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Updating payment status","category":"airtable","data":{"paymentIntentId":"pi_123"}}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle missing claim gracefully
[22m[39m{"timestamp":"2025-10-31T20:13:35.956Z","level":"info","message":"Claim marked as validated after successful payment","claimId":"CLM001"}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle claim update failure
[22m[39m{"timestamp":"2025-10-31T20:13:35.960Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/webhooks/stripe","category":"http","data":{"method":"POST","url":"http://localhost:3000/api/webhooks/stripe"}}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle claim update failure
[22m[39m{"timestamp":"2025-10-31T20:13:35.960Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Processing Stripe webhook event","category":"webhook","data":{"event_type":"payment_intent.succeeded"}}
{"timestamp":"2025-10-31T20:13:35.960Z","level":"info","message":"Payment succeeded","paymentIntentId":"pi_123"}
{"timestamp":"2025-10-31T20:13:35.960Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Updating payment status","category":"airtable","data":{"paymentIntentId":"pi_123"}}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle claim update failure
[22m[39m{"timestamp":"2025-10-31T20:13:35.960Z","level":"info","message":"Claim marked as validated after successful payment","claimId":"CLM001"}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle claim update failure
[22m[39m{"timestamp":"2025-10-31T20:13:35.960Z","level":"warn","message":"SendGrid not configured. Email not sent."}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle claim update failure
[22m[39m{"timestamp":"2025-10-31T20:13:35.960Z","level":"info","message":"Payment confirmation email sent","claimId":"CLM001"}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle claim update failure
[22m[39m{"timestamp":"2025-10-31T20:13:35.960Z","level":"info","message":"Claim automatically prepared for filing","claimId":"CLM001"}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle claim update failure
[22m[39m{"timestamp":"2025-10-31T20:13:35.960Z","level":"info","message":"Admin alert sent","claimId":"CLM001"}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle automatic preparation failure gracefully
[22m[39m{"timestamp":"2025-10-31T20:13:35.962Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/webhooks/stripe","category":"http","data":{"method":"POST","url":"http://localhost:3000/api/webhooks/stripe"}}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle automatic preparation failure gracefully
[22m[39m{"timestamp":"2025-10-31T20:13:35.962Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Processing Stripe webhook event","category":"webhook","data":{"event_type":"payment_intent.succeeded"}}
{"timestamp":"2025-10-31T20:13:35.962Z","level":"info","message":"Payment succeeded","paymentIntentId":"pi_123"}
{"timestamp":"2025-10-31T20:13:35.962Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Updating payment status","category":"airtable","data":{"paymentIntentId":"pi_123"}}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle automatic preparation failure gracefully
[22m[39m{"timestamp":"2025-10-31T20:13:35.962Z","level":"info","message":"Claim marked as validated after successful payment","claimId":"CLM001"}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle automatic preparation failure gracefully
[22m[39m{"timestamp":"2025-10-31T20:13:35.962Z","level":"warn","message":"SendGrid not configured. Email not sent."}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle automatic preparation failure gracefully
[22m[39m{"timestamp":"2025-10-31T20:13:35.962Z","level":"info","message":"Payment confirmation email sent","claimId":"CLM001"}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle automatic preparation failure gracefully
[22m[39m{"timestamp":"2025-10-31T20:13:35.962Z","level":"warn","message":"Automatic preparation failed for claim","claimId":"CLM001"}

[90mstdout[2m | src/app/api/__tests__/admin-api.test.ts[2m > [22m[2mAdmin API Integration Tests[2m > [22m[2mGET /api/admin/airlines/[code][2m > [22m[2mshould return specific airline configuration
[22m[39m{"timestamp":"2025-10-31T20:13:35.962Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Fetching airline configuration","category":"admin","data":{"airlineCode":"BA"}}

[90mstdout[2m | src/app/api/__tests__/admin-api.test.ts[2m > [22m[2mAdmin API Integration Tests[2m > [22m[2mGET /api/admin/airlines/[code][2m > [22m[2mshould return 404 for non-existent airline
[22m[39m{"timestamp":"2025-10-31T20:13:35.963Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Fetching airline configuration","category":"admin","data":{"airlineCode":"UNKNOWN"}}

[90mstdout[2m | src/app/api/__tests__/admin-api.test.ts[2m > [22m[2mAdmin API Integration Tests[2m > [22m[2mError Handling[2m > [22m[2mshould handle malformed JSON in request body
[22m[39m{"timestamp":"2025-10-31T20:13:35.964Z","level":"error","message":"Error updating claim status:","error":{"message":"Unexpected token 'i', \"invalid json\" is not valid JSON","stack":"SyntaxError: Unexpected token 'i', \"invalid json\" is not valid JSON\n    at JSON.parse (<anonymous>)\n    at NextRequest.json (file:///Users/connorowens/Desktop/flghtly/node_modules/happy-dom/lib/fetch/Request.js:325:21)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at PUT (/Users/connorowens/Desktop/flghtly/src/app/api/admin/claims/[id]/status/route.ts:12:18)\n    at /Users/connorowens/Desktop/flghtly/src/app/api/__tests__/admin-api.test.ts:572:24\n    at file:///Users/connorowens/Desktop/flghtly/node_modules/@vitest/runner/dist/index.js:753:20","name":"SyntaxError"}}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle admin email sending failure gracefully
[22m[39m{"timestamp":"2025-10-31T20:13:35.968Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/webhooks/stripe","category":"http","data":{"method":"POST","url":"http://localhost:3000/api/webhooks/stripe"}}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle admin email sending failure gracefully
[22m[39m{"timestamp":"2025-10-31T20:13:35.968Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Processing Stripe webhook event","category":"webhook","data":{"event_type":"payment_intent.succeeded"}}
{"timestamp":"2025-10-31T20:13:35.968Z","level":"info","message":"Payment succeeded","paymentIntentId":"pi_123"}
{"timestamp":"2025-10-31T20:13:35.968Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Updating payment status","category":"airtable","data":{"paymentIntentId":"pi_123"}}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle admin email sending failure gracefully
[22m[39m{"timestamp":"2025-10-31T20:13:35.968Z","level":"info","message":"Claim marked as validated after successful payment","claimId":"CLM001"}

[90mstdout[2m | src/app/api/__tests__/admin-api.test.ts[2m > [22m[2mAdmin API Integration Tests[2m > [22m[2mError Handling[2m > [22m[2mshould handle service errors gracefully
[22m[39m{"timestamp":"2025-10-31T20:13:35.968Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/admin/claims","category":"http","data":{"method":"GET","url":"http://localhost:3000/api/admin/claims"}}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle admin email sending failure gracefully
[22m[39m{"timestamp":"2025-10-31T20:13:35.968Z","level":"warn","message":"SendGrid not configured. Email not sent."}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle admin email sending failure gracefully
[22m[39m{"timestamp":"2025-10-31T20:13:35.968Z","level":"info","message":"Payment confirmation email sent","claimId":"CLM001"}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle admin email sending failure gracefully
[22m[39m{"timestamp":"2025-10-31T20:13:35.968Z","level":"info","message":"Claim automatically prepared for filing","claimId":"CLM001"}

[90mstdout[2m | src/app/api/__tests__/admin-api.test.ts[2m > [22m[2mAdmin API Integration Tests[2m > [22m[2mError Handling[2m > [22m[2mshould handle service errors gracefully
[22m[39m{"timestamp":"2025-10-31T20:13:35.969Z","level":"error","message":"[Error Tracking]","tags":{"route":"/api/admin/claims","method":"GET","service":"admin","operation":"claim_management"},"extra":{"url":"http://localhost:3000/api/admin/claims","headers":{}},"error":{"message":"Service unavailable","stack":"Error: Service unavailable\n    at /Users/connorowens/Desktop/flghtly/src/app/api/__tests__/admin-api.test.ts:601:9\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Users/connorowens/Desktop/flghtly/node_modules/@vitest/runner/dist/index.js:753:20","name":"Error"}}

 [31mâ¯[39m src/app/api/__tests__/admin-api.test.ts [2m([22m[2m23 tests[22m[2m | [22m[31m13 failed[39m[2m)[22m[33m 954[2mms[22m[39m
       [33m[2mâœ“[22m[39m should return claims with status filter [33m 774[2mms[22m[39m
       [32mâœ“[39m should return all claims when no status filter[32m 11[2mms[22m[39m
[31m       [31mÃ—[31m should filter by airline[39m[32m 10[2mms[22m[39m
[31m       [31mÃ—[31m should handle pagination[39m[32m 2[2mms[22m[39m
[31m       [31mÃ—[31m should handle errors gracefully[39m[32m 3[2mms[22m[39m
[31m       [31mÃ—[31m should return claims ready to file[39m[32m 4[2mms[22m[39m
[31m       [31mÃ—[31m should return claim filing statistics[39m[32m 8[2mms[22m[39m
       [32mâœ“[39m should return specific claim details[32m 19[2mms[22m[39m
       [32mâœ“[39m should return 404 for non-existent claim[32m 2[2mms[22m[39m
       [32mâœ“[39m should validate claim for filing[32m 11[2mms[22m[39m
       [32mâœ“[39m should handle validation failure[32m 2[2mms[22m[39m
       [32mâœ“[39m should generate airline submission[32m 12[2mms[22m[39m
[31m       [31mÃ—[31m should update claim status[39m[32m 16[2mms[22m[39m
[31m       [31mÃ—[31m should handle status update failure[39m[32m 2[2mms[22m[39m
       [32mâœ“[39m should mark claim as filed[32m 10[2mms[22m[39m
[31m       [31mÃ—[31m should schedule follow-up[39m[32m 27[2mms[22m[39m
[31m       [31mÃ—[31m should return all airline configurations[39m[32m 22[2mms[22m[39m
[31m       [31mÃ—[31m should filter airlines by submission method[39m[32m 1[2mms[22m[39m
       [32mâœ“[39m should return specific airline configuration[32m 8[2mms[22m[39m
       [32mâœ“[39m should return 404 for non-existent airline[32m 1[2mms[22m[39m
[31m       [31mÃ—[31m should handle malformed JSON in request body[39m[32m 1[2mms[22m[39m
[31m       [31mÃ—[31m should handle missing required fields[39m[32m 2[2mms[22m[39m
[31m       [31mÃ—[31m should handle service errors gracefully[39m[32m 2[2mms[22m[39m
[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle admin email sending failure gracefully
[22m[39m{"timestamp":"2025-10-31T20:13:35.971Z","level":"error","message":"[Error Tracking]","tags":{"service":"email","claim_id":"CLM001","alert_type":"admin"},"extra":{},"error":{"message":"Email failed","stack":"Error: Email failed\n    at /Users/connorowens/Desktop/flghtly/src/app/api/__tests__/stripe-webhook.test.ts:331:9\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Users/connorowens/Desktop/flghtly/node_modules/@vitest/runner/dist/index.js:753:20","name":"Error"}}
{"timestamp":"2025-10-31T20:13:35.971Z","level":"error","message":"Error sending admin alert","claimId":"CLM001","error":{"message":"Email failed","stack":"Error: Email failed\n    at /Users/connorowens/Desktop/flghtly/src/app/api/__tests__/stripe-webhook.test.ts:331:9\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Users/connorowens/Desktop/flghtly/node_modules/@vitest/runner/dist/index.js:753:20","name":"Error"}}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle missing admin email configuration
[22m[39m{"timestamp":"2025-10-31T20:13:35.977Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/webhooks/stripe","category":"http","data":{"method":"POST","url":"http://localhost:3000/api/webhooks/stripe"}}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle missing admin email configuration
[22m[39m{"timestamp":"2025-10-31T20:13:35.977Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Processing Stripe webhook event","category":"webhook","data":{"event_type":"payment_intent.succeeded"}}
{"timestamp":"2025-10-31T20:13:35.977Z","level":"info","message":"Payment succeeded","paymentIntentId":"pi_123"}
{"timestamp":"2025-10-31T20:13:35.977Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Updating payment status","category":"airtable","data":{"paymentIntentId":"pi_123"}}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle missing admin email configuration
[22m[39m{"timestamp":"2025-10-31T20:13:35.977Z","level":"info","message":"Claim marked as validated after successful payment","claimId":"CLM001"}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle missing admin email configuration
[22m[39m{"timestamp":"2025-10-31T20:13:35.977Z","level":"warn","message":"SendGrid not configured. Email not sent."}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle missing admin email configuration
[22m[39m{"timestamp":"2025-10-31T20:13:35.977Z","level":"info","message":"Payment confirmation email sent","claimId":"CLM001"}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle missing admin email configuration
[22m[39m{"timestamp":"2025-10-31T20:13:35.977Z","level":"info","message":"Claim automatically prepared for filing","claimId":"CLM001"}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle invalid webhook signature
[22m[39m{"timestamp":"2025-10-31T20:13:35.979Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/webhooks/stripe","category":"http","data":{"method":"POST","url":"http://localhost:3000/api/webhooks/stripe"}}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle invalid webhook signature
[22m[39m{"timestamp":"2025-10-31T20:13:35.980Z","level":"error","message":"[Error Tracking]","tags":{"service":"stripe","error_type":"signature_verification"},"extra":{},"error":{"message":"Invalid signature","stack":"Error: Invalid signature\n    at Object.<anonymous> (/Users/connorowens/Desktop/flghtly/src/app/api/__tests__/stripe-webhook.test.ts:393:15)\n    at Object.Mock [as constructEvent] (file:///Users/connorowens/Desktop/flghtly/node_modules/@vitest/spy/dist/index.js:274:34)\n    at POST.route (/Users/connorowens/Desktop/flghtly/src/app/api/webhooks/stripe/route.ts:43:29)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/connorowens/Desktop/flghtly/src/lib/error-tracking.ts:329:24\n    at /Users/connorowens/Desktop/flghtly/src/app/api/__tests__/stripe-webhook.test.ts:407:24\n    at file:///Users/connorowens/Desktop/flghtly/node_modules/@vitest/runner/dist/index.js:753:20","name":"Error"}}
{"timestamp":"2025-10-31T20:13:35.980Z","level":"error","message":"Webhook signature verification failed","error":{"message":"Invalid signature","stack":"Error: Invalid signature\n    at Object.<anonymous> (/Users/connorowens/Desktop/flghtly/src/app/api/__tests__/stripe-webhook.test.ts:393:15)\n    at Object.Mock [as constructEvent] (file:///Users/connorowens/Desktop/flghtly/node_modules/@vitest/spy/dist/index.js:274:34)\n    at POST.route (/Users/connorowens/Desktop/flghtly/src/app/api/webhooks/stripe/route.ts:43:29)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/connorowens/Desktop/flghtly/src/lib/error-tracking.ts:329:24\n    at /Users/connorowens/Desktop/flghtly/src/app/api/__tests__/stripe-webhook.test.ts:407:24\n    at file:///Users/connorowens/Desktop/flghtly/node_modules/@vitest/runner/dist/index.js:753:20","name":"Error"}}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle invalid webhook signature
[22m[39m{"timestamp":"2025-10-31T20:13:35.981Z","level":"info","message":"[Error Tracking]","messagecontext":"API route returned 400: /api/webhooks/stripe","context":{"level":"warning","tags":{"route":"/api/webhooks/stripe","status":"400","service":"stripe","type":"webhook"}}}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle malformed request body
[22m[39m{"timestamp":"2025-10-31T20:13:35.982Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/webhooks/stripe","category":"http","data":{"method":"POST","url":"http://localhost:3000/api/webhooks/stripe"}}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle malformed request body
[22m[39m{"timestamp":"2025-10-31T20:13:35.982Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Processing Stripe webhook event","category":"webhook","data":{"event_type":"payment_intent.succeeded"}}
{"timestamp":"2025-10-31T20:13:35.982Z","level":"info","message":"Payment succeeded","paymentIntentId":"pi_123"}
{"timestamp":"2025-10-31T20:13:35.982Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Updating payment status","category":"airtable","data":{"paymentIntentId":"pi_123"}}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle malformed request body
[22m[39m{"timestamp":"2025-10-31T20:13:35.982Z","level":"info","message":"Claim marked as validated after successful payment","claimId":"CLM001"}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle malformed request body
[22m[39m{"timestamp":"2025-10-31T20:13:35.982Z","level":"warn","message":"SendGrid not configured. Email not sent."}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle malformed request body
[22m[39m{"timestamp":"2025-10-31T20:13:35.982Z","level":"info","message":"Payment confirmation email sent","claimId":"CLM001"}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle malformed request body
[22m[39m{"timestamp":"2025-10-31T20:13:35.982Z","level":"info","message":"Claim automatically prepared for filing","claimId":"CLM001"}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle malformed request body
[22m[39m{"timestamp":"2025-10-31T20:13:35.982Z","level":"error","message":"[Error Tracking]","tags":{"service":"email","claim_id":"CLM001","alert_type":"admin"},"extra":{},"error":{"message":"Email failed","stack":"Error: Email failed\n    at /Users/connorowens/Desktop/flghtly/src/app/api/__tests__/stripe-webhook.test.ts:331:9\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Users/connorowens/Desktop/flghtly/node_modules/@vitest/runner/dist/index.js:753:20","name":"Error"}}
{"timestamp":"2025-10-31T20:13:35.982Z","level":"error","message":"Error sending admin alert","claimId":"CLM001","error":{"message":"Email failed","stack":"Error: Email failed\n    at /Users/connorowens/Desktop/flghtly/src/app/api/__tests__/stripe-webhook.test.ts:331:9\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Users/connorowens/Desktop/flghtly/node_modules/@vitest/runner/dist/index.js:753:20","name":"Error"}}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle different payment amounts correctly
[22m[39m{"timestamp":"2025-10-31T20:13:35.985Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"API Request: /api/webhooks/stripe","category":"http","data":{"method":"POST","url":"http://localhost:3000/api/webhooks/stripe"}}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle different payment amounts correctly
[22m[39m{"timestamp":"2025-10-31T20:13:35.986Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Processing Stripe webhook event","category":"webhook","data":{"event_type":"payment_intent.succeeded"}}
{"timestamp":"2025-10-31T20:13:35.986Z","level":"info","message":"Payment succeeded","paymentIntentId":"pi_123"}
{"timestamp":"2025-10-31T20:13:35.986Z","level":"info","message":"[Breadcrumb]","messagecategorydata":"Updating payment status","category":"airtable","data":{"paymentIntentId":"pi_123"}}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle different payment amounts correctly
[22m[39m{"timestamp":"2025-10-31T20:13:35.986Z","level":"info","message":"Claim marked as validated after successful payment","claimId":"CLM001"}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle different payment amounts correctly
[22m[39m{"timestamp":"2025-10-31T20:13:35.986Z","level":"warn","message":"SendGrid not configured. Email not sent."}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle different payment amounts correctly
[22m[39m{"timestamp":"2025-10-31T20:13:35.986Z","level":"info","message":"Payment confirmation email sent","claimId":"CLM001"}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle different payment amounts correctly
[22m[39m{"timestamp":"2025-10-31T20:13:35.986Z","level":"info","message":"Claim automatically prepared for filing","claimId":"CLM001"}

[90mstdout[2m | src/app/api/__tests__/stripe-webhook.test.ts[2m > [22m[2mStripe Webhook Integration Tests[2m > [22m[2mPOST /api/webhooks/stripe[2m > [22m[2mshould handle different payment amounts correctly
[22m[39m{"timestamp":"2025-10-31T20:13:35.986Z","level":"error","message":"[Error Tracking]","tags":{"service":"email","claim_id":"CLM001","alert_type":"admin"},"extra":{},"error":{"message":"Email failed","stack":"Error: Email failed\n    at /Users/connorowens/Desktop/flghtly/src/app/api/__tests__/stripe-webhook.test.ts:331:9\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Users/connorowens/Desktop/flghtly/node_modules/@vitest/runner/dist/index.js:753:20","name":"Error"}}
{"timestamp":"2025-10-31T20:13:35.986Z","level":"error","message":"Error sending admin alert","claimId":"CLM001","error":{"message":"Email failed","stack":"Error: Email failed\n    at /Users/connorowens/Desktop/flghtly/src/app/api/__tests__/stripe-webhook.test.ts:331:9\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Users/connorowens/Desktop/flghtly/node_modules/@vitest/runner/dist/index.js:753:20","name":"Error"}}

 [32mâœ“[39m src/app/api/__tests__/stripe-webhook.test.ts [2m([22m[2m12 tests[22m[2m)[22m[33m 972[2mms[22m[39m
       [33m[2mâœ“[22m[39m should process successful payment and prepare claim [33m 903[2mms[22m[39m
[90mstderr[2m | Fetch.onError (file:/Users/connorowens/Desktop/flghtly/node_modules/happy-dom/lib/fetch/Fetch.js:539:41)
[22m[39mDOMException [AbortError]: The operation was aborted.
    at Fetch.onAsyncTaskManagerAbort [90m(file:///Users/connorowens/Desktop/flghtly/[39mnode_modules/[4mhappy-dom[24m/lib/fetch/Fetch.js:546:23[90m)[39m
    at Object.<anonymous> [90m(file:///Users/connorowens/Desktop/flghtly/[39mnode_modules/[4mhappy-dom[24m/lib/fetch/Fetch.js:416:101[90m)[39m
    at AsyncTaskManager.abortAll [90m(file:///Users/connorowens/Desktop/flghtly/[39mnode_modules/[4mhappy-dom[24m/lib/async-task-manager/AsyncTaskManager.js:292:30[90m)[39m
    at AsyncTaskManager.abort [90m(file:///Users/connorowens/Desktop/flghtly/[39mnode_modules/[4mhappy-dom[24m/lib/async-task-manager/AsyncTaskManager.js:52:21[90m)[39m
    at DetachedBrowserFrame.abort [90m(file:///Users/connorowens/Desktop/flghtly/[39mnode_modules/[4mhappy-dom[24m/lib/browser/detached-browser/DetachedBrowserFrame.js:112:58[90m)[39m
    at DetachedWindowAPI.abort [90m(file:///Users/connorowens/Desktop/flghtly/[39mnode_modules/[4mhappy-dom[24m/lib/window/DetachedWindowAPI.js:51:35[90m)[39m
    at teardownWindow [90m(file:///Users/connorowens/Desktop/flghtly/[39mnode_modules/[4mvitest[24m/dist/chunks/index.DON9WL-E.js:307:58[90m)[39m
    at Object.teardown [90m(file:///Users/connorowens/Desktop/flghtly/[39mnode_modules/[4mvitest[24m/dist/chunks/index.DON9WL-E.js:361:10[90m)[39m
    at withEnv [90m(file:///Users/connorowens/Desktop/flghtly/[39mnode_modules/[4mvitest[24m/dist/chunks/base.CVAgx931.js:61:66[90m)[39m
    at run [90m(file:///Users/connorowens/Desktop/flghtly/[39mnode_modules/[4mvitest[24m/dist/chunks/base.CVAgx931.js:72:144[90m)[39m

 [32mâœ“[39m src/lib/__tests__/denied-boarding.test.ts [2m([22m[2m22 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32mâœ“[39m __tests__/lib/formCalculations.test.ts [2m([22m[2m46 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [31mâ¯[39m src/components/__tests__/ClaimSubmissionForm.test.tsx [2m([22m[2m10 tests[22m[2m | [22m[31m10 failed[39m[2m)[22m[32m 24[2mms[22m[39m
[31m     [31mÃ—[31m should render the form with first step[39m[32m 15[2mms[22m[39m
[31m     [31mÃ—[31m should show validation errors for empty required fields[39m[32m 2[2mms[22m[39m
[31m     [31mÃ—[31m should validate email format[39m[32m 1[2mms[22m[39m
[31m     [31mÃ—[31m should allow navigation to next step when valid[39m[32m 1[2mms[22m[39m
[31m     [31mÃ—[31m should allow navigation back to previous step[39m[32m 1[2mms[22m[39m
[31m     [31mÃ—[31m should persist form data in localStorage[39m[32m 1[2mms[22m[39m
[31m     [31mÃ—[31m should show progress indicator[39m[32m 1[2mms[22m[39m
[31m     [31mÃ—[31m should disable back button on first step[39m[32m 1[2mms[22m[39m
[31m     [31mÃ—[31m should validate required fields for step 2[39m[32m 1[2mms[22m[39m
[31m     [31mÃ—[31m should clear errors when user starts typing[39m[32m 1[2mms[22m[39m
 [32mâœ“[39m src/lib/__tests__/parse-flight-email.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32mâœ“[39m src/lib/__tests__/airline-monitoring.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32mâœ“[39m src/app/api/__tests__/create-payment-intent.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 2[2mms[22m[39m
 [32mâœ“[39m src/lib/__tests__/airtable.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 4[2mms[22m[39m
[90mstdout[2m | __tests__/integration/formSubmission.test.tsx[2m > [22m[2mIntegration: Cancellation Claim with Alternative Flight[2m > [22m[2mshould submit cancellation claim with alternative flight and structured timing
[22m[39mðŸš€ Form submitted with data: {
  flightNumber: [32m'BA123'[39m,
  airline: [32m'British Airways'[39m,
  departureDate: [32m'2024-01-15'[39m,
  departureAirport: [32m'LHR'[39m,
  arrivalAirport: [32m'JFK'[39m,
  delayHours: [32m''[39m,
  delayMinutes: [32m''[39m,
  delayReason: [32m''[39m,
  passengerEmail: [32m'jane@example.com'[39m,
  firstName: [32m'Jane'[39m,
  lastName: [32m'Smith'[39m,
  disruptionType: [32m'cancellation'[39m,
  notificationDate: [32m'2024-01-10'[39m,
  noticeGiven: [32m'< 7 days'[39m,
  alternativeOffered: [33mtrue[39m,
  alternativeFlightNumber: [32m''[39m,
  alternativeDepartureTime: [32m''[39m,
  alternativeArrivalTime: [32m''[39m,
  alternativeTiming: [32m''[39m,
  alternativeDepartureHours: [32m'3'[39m,
  alternativeDepartureMinutes: [32m'25'[39m,
  alternativeArrivalHours: [32m'2'[39m,
  alternativeArrivalMinutes: [32m'15'[39m,
  alternativeNextDay: [33mfalse[39m,
  careProvided: {
    meals: [33mfalse[39m,
    hotel: [33mfalse[39m,
    transport: [33mfalse[39m,
    communication: [33mfalse[39m
  },
  passengerChoice: [32m''[39m,
  boardingType: [32m'involuntary'[39m,
  volunteersRequested: [33mfalse[39m,
  deniedBoardingReason: [32m''[39m,
  alternativeArrivalDelay: [32m''[39m,
  checkedInOnTime: [32m''[39m,
  ticketPrice: [32m''[39m,
  classPaidFor: [32m''[39m,
  classReceived: [32m''[39m,
  downgradeTiming: [32m''[39m,
  downgradeReason: [32m''[39m,
  isRoundTrip: [33mfalse[39m
}
âœ… Form validation passed, submitting...

[90mstderr[2m | __tests__/e2e/flightEligibility.spec.ts
[22m[39mGET http://localhost:3000/Users/connorowens/Desktop/flghtly/node_modules/playwright/lib/index.js 404 (Not Found)

[90mstderr[2m | __tests__/e2e/flightEligibility.spec.ts
[22m[39mGET http://localhost:3000/Users/connorowens/Desktop/flghtly/__tests__/e2e/flightEligibility.spec.ts 404 (Not Found)

[90mstdout[2m | __tests__/components/FlightLookupForm.test.tsx[2m > [22m[2mFlightLookupForm - Validation[2m > [22m[2mshould show validation errors for empty required fields
[22m[39mðŸš€ Form submitted with data: {
  flightNumber: [32m''[39m,
  airline: [32m''[39m,
  departureDate: [32m''[39m,
  departureAirport: [32m''[39m,
  arrivalAirport: [32m''[39m,
  delayHours: [32m''[39m,
  delayMinutes: [32m''[39m,
  delayReason: [32m''[39m,
  passengerEmail: [32m''[39m,
  firstName: [32m''[39m,
  lastName: [32m''[39m,
  disruptionType: [32m'delay'[39m,
  notificationDate: [32m''[39m,
  noticeGiven: [32m''[39m,
  alternativeOffered: [33mfalse[39m,
  alternativeFlightNumber: [32m''[39m,
  alternativeDepartureTime: [32m''[39m,
  alternativeArrivalTime: [32m''[39m,
  alternativeTiming: [32m''[39m,
  alternativeDepartureHours: [32m''[39m,
  alternativeDepartureMinutes: [32m''[39m,
  alternativeArrivalHours: [32m''[39m,
  alternativeArrivalMinutes: [32m''[39m,
  alternativeNextDay: [33mfalse[39m,
  careProvided: {
    meals: [33mfalse[39m,
    hotel: [33mfalse[39m,
    transport: [33mfalse[39m,
    communication: [33mfalse[39m
  },
  passengerChoice: [32m''[39m,
  boardingType: [32m'involuntary'[39m,
  volunteersRequested: [33mfalse[39m,
  deniedBoardingReason: [32m''[39m,
  alternativeArrivalDelay: [32m''[39m,
  checkedInOnTime: [32m''[39m,
  ticketPrice: [32m''[39m,
  classPaidFor: [32m''[39m,
  classReceived: [32m''[39m,
  downgradeTiming: [32m''[39m,
  downgradeReason: [32m''[39m,
  isRoundTrip: [33mfalse[39m
}

[90mstderr[2m | __tests__/components/FlightLookupForm.test.tsx[2m > [22m[2mFlightLookupForm - Validation[2m > [22m[2mshould show validation errors for empty required fields
[22m[39mðŸ“‹ Validation errors: {
  flightNumber: [32m'Flight number is required'[39m,
  departureDate: [32m'Flight date is required'[39m,
  airline: [32m'Airline is required'[39m,
  departureAirport: [32m'Airport code is required'[39m,
  arrivalAirport: [32m'Airport code is required'[39m,
  delayHours: [32m'Delay duration is required'[39m,
  passengerEmail: [32m'Email is required'[39m,
  firstName: [32m'First name is required'[39m,
  lastName: [32m'Last name is required'[39m
}
âŒ Form validation failed. Check errors above.

 [31mâ¯[39m __tests__/components/FlightLookupForm.test.tsx [2m([22m[2m27 tests[22m[2m | [22m[31m7 failed[39m[2m)[22m[33m 4620[2mms[22m[39m
       [32mâœ“[39m should render all four disruption type options[32m 27[2mms[22m[39m
       [32mâœ“[39m should show disruption type as first question[32m 7[2mms[22m[39m
       [32mâœ“[39m should show delay fields when delay is selected[32m 9[2mms[22m[39m
       [32mâœ“[39m should not show cancellation fields when delay is selected[32m 11[2mms[22m[39m
       [32mâœ“[39m should show cancellation fields when cancellation is selected[32m 15[2mms[22m[39m
       [32mâœ“[39m should not show delay fields when cancellation is selected[32m 16[2mms[22m[39m
       [32mâœ“[39m should show alternative timing fields when alternative offered is checked[32m 26[2mms[22m[39m
       [32mâœ“[39m should hide alternative timing fields when alternative offered is unchecked[32m 42[2mms[22m[39m
       [32mâœ“[39m should show denied boarding fields when denied boarding is selected[32m 20[2mms[22m[39m
       [32mâœ“[39m should show alternative arrival delay radio buttons when alternative offered[32m 38[2mms[22m[39m
[31m       [31mÃ—[31m should show downgrade fields when downgrade is selected[39m[33m 1026[2mms[22m[39m
       [32mâœ“[39m should auto-calculate notice period from dates[32m 32[2mms[22m[39m
       [32mâœ“[39m should show edit button for auto-calculated notice period[32m 30[2mms[22m[39m
[31m       [31mÃ—[31m should show dropdown when edit is clicked[39m[33m 1041[2mms[22m[39m
       [32mâœ“[39m should show calculated summary for alternative timing[32m 46[2mms[22m[39m
[31m     [31mÃ—[31m should show direction arrow between airport fields[39m[32m 8[2mms[22m[39m
     [32mâœ“[39m should show collapsed cancellation rights info box[32m 14[2mms[22m[39m
     [32mâœ“[39m should expand info box when clicked[32m 24[2mms[22m[39m
     [32mâœ“[39m should collapse info box when clicked again[32m 30[2mms[22m[39m
[31m     [31mÃ—[31m should show round-trip checkbox for denied boarding[39m[32m 20[2mms[22m[39m
[31m     [31mÃ—[31m should show round-trip checkbox for downgrade[39m[32m 20[2mms[22m[39m
     [32mâœ“[39m should show dollar sign prefix for ticket price[32m 18[2mms[22m[39m
     [32mâœ“[39m should show validation errors for empty required fields[32m 20[2mms[22m[39m
[31m     [31mÃ—[31m should validate flight number format[39m[33m 1020[2mms[22m[39m
[31m     [31mÃ—[31m should clear error when user starts typing[39m[33m 1020[2mms[22m[39m
     [32mâœ“[39m should track disruption type selection[32m 11[2mms[22m[39m
     [32mâœ“[39m should track info box expansion[32m 27[2mms[22m[39m
 [31mâ¯[39m __tests__/integration/formSubmission.test.tsx [2m([22m[2m7 tests[22m[2m | [22m[31m7 failed[39m[2m)[22m[33m 5537[2mms[22m[39m
[31m     [31mÃ—[31m should submit a complete delay claim successfully[39m[33m 1058[2mms[22m[39m
[31m     [31mÃ—[31m should submit cancellation claim with alternative flight and structured timing[39m[33m 1166[2mms[22m[39m
[31m     [31mÃ—[31m should allow user to correct auto-calculated notice period[39m[33m 1052[2mms[22m[39m
[31m     [31mÃ—[31m should submit denied boarding claim with structured alternative delay tiers[39m[32m 116[2mms[22m[39m
[31m     [31mÃ—[31m should handle round-trip ticket price correctly[39m[32m 78[2mms[22m[39m
[31m     [31mÃ—[31m should submit downgrade claim successfully[39m[33m 1021[2mms[22m[39m
[31m     [31mÃ—[31m should handle API errors gracefully[39m[33m 1046[2mms[22m[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Failed Suites 2 [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[41m[1m FAIL [22m[49m __tests__/e2e/flightEligibility.spec.ts[2m [ __tests__/e2e/flightEligibility.spec.ts ][22m
[31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
Most common reasons include:
- You are calling test.describe() in a configuration file.
- You are calling test.describe() in a file that is imported by the configuration file.
- You have two different versions of @playwright/test. This usually happens
  when one of the dependencies in your package.json depends on @playwright/test.[39m
[90m [2mâ¯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m74:13[22m[39m
[90m [2mâ¯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m114:24[22m[39m
[90m [2mâ¯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m275:12[22m[39m
[36m [2mâ¯[22m __tests__/e2e/flightEligibility.spec.ts:[2m10:6[22m[39m
    [90m  8| [39m[35mimport[39m { test[33m,[39m expect } [35mfrom[39m [32m'@playwright/test'[39m[33m;[39m
    [90m  9| [39m
    [90m 10| [39mtest[33m.[39m[34mdescribe[39m([32m'Flight Eligibility Form - E2E Tests'[39m[33m,[39m () [33m=>[39m {
    [90m   | [39m     [31m^[39m
    [90m 11| [39m  test[33m.[39m[34mbeforeEach[39m([35masync[39m ({ page }) [33m=>[39m {
    [90m 12| [39m    [35mawait[39m page[33m.[39m[34mgoto[39m([32m'/'[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/flight-validation.test.ts[2m [ src/lib/__tests__/flight-validation.test.ts ][22m
[31m[1mError[22m: Failed to resolve import "./airports" from "src/lib/__tests__/flight-validation.test.ts". Does the file exist?[39m
  Plugin: [35mvite:import-analysis[39m
  File: [36m/Users/connorowens/Desktop/flghtly/src/lib/__tests__/flight-validation.test.ts[39m:13:7
[33m  6  |    searchAirports,
  7  |    getAirportCoordinates
  8  |  } from "./airports";
     |          ^
  9  |  import {
  10 |    airlines,[39m
[90m [2mâ¯[22m TransformPluginContext._formatLog node_modules/vite/dist/node/chunks/config.js:[2m31106:43[22m[39m
[90m [2mâ¯[22m TransformPluginContext.error node_modules/vite/dist/node/chunks/config.js:[2m31103:14[22m[39m
[90m [2mâ¯[22m normalizeUrl node_modules/vite/dist/node/chunks/config.js:[2m29590:18[22m[39m
[90m [2mâ¯[22m node_modules/vite/dist/node/chunks/config.js:[2m29648:32[22m[39m
[90m [2mâ¯[22m TransformPluginContext.transform node_modules/vite/dist/node/chunks/config.js:[2m29616:4[22m[39m
[90m [2mâ¯[22m EnvironmentPluginContainer.transform node_modules/vite/dist/node/chunks/config.js:[2m30905:14[22m[39m
[90m [2mâ¯[22m loadAndTransform node_modules/vite/dist/node/chunks/config.js:[2m26043:26[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/74]âŽ¯[22m[39m


[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Failed Tests 72 [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[41m[1m FAIL [22m[49m __tests__/components/FlightLookupForm.test.tsx[2m > [22mFlightLookupForm - Conditional Rendering[2m > [22mdowngrade-specific fields[2m > [22mshould show downgrade fields when downgrade is selected
[31m[1mTestingLibraryElementError[22m[39m: Unable to find an element with the text: /Class Paid For/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<form[39m
      [33mclass[39m=[32m"space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"text-center mb-6"[39m
      [36m>[39m
        [36m<h2[39m
          [33mclass[39m=[32m"text-2xl font-bold text-gray-900 mb-2"[39m
        [36m>[39m
          [0mCheck Your Eligibility[0m
        [36m</h2>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-gray-600"[39m
        [36m>[39m
          [0mWe'll check if you're eligible for compensation in less than 2 minutes[0m
        [36m</p>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"mb-6"[39m
      [36m>[39m
        [36m<label[39m
          [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-3"[39m
        [36m>[39m
          [0mWhat happened to your flight?[0m
        [36m</label>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 sm:grid-cols-2 gap-3"[39m
        [36m>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mchecked[39m=[32m""[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"delay"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mFlight Delayed[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mFlight departed late from scheduled time[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"cancellation"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mFlight Cancelled[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mFlight did not operate at all[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"denied_boarding"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mDenied Boarding[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mNot allowed to board despite valid ticket[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"downgrade"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mSeat Downgrade[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mPlaced in lower class than booked[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
            [33mfor[39m=[32m"departureDate"[39m
          [36m>[39m
            [0mDeparture Date[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
              [33mid[39m=[32m"departureDate"[39m
              [33mtype[39m=[32m"date"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
          [36m>[39m
            [0mWhen was your flight scheduled to depart?[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
            [33mfor[39m=[32m"flightNumber"[39m
          [36m>[39m
            [0mFlight Number[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
              [33mid[39m=[32m"flightNumber"[39m
              [33mplaceholder[39m=[32m"e.g., BA123"[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
          [36m>[39m
            [0mFound on your boarding pass or confirmation email[...

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<form[39m
        [33mclass[39m=[32m"space-y-6"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"text-center mb-6"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-2xl font-bold text-gray-900 mb-2"[39m
          [36m>[39m
            [0mCheck Your Eligibility[0m
          [36m</h2>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600"[39m
          [36m>[39m
            [0mWe'll check if you're eligible for compensation in less than 2 minutes[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-6"[39m
        [36m>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-3"[39m
          [36m>[39m
            [0mWhat happened to your flight?[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 sm:grid-cols-2 gap-3"[39m
          [36m>[39m
            [36m<label[39m
              [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
            [36m>[39m
              [36m<input[39m
                [33mchecked[39m=[32m""[39m
                [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
                [33mname[39m=[32m"disruptionType"[39m
                [33mtype[39m=[32m"radio"[39m
                [33mvalue[39m=[32m"delay"[39m
              [36m/>[39m
              [36m<div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium"[39m
                [36m>[39m
                  [0mFlight Delayed[0m
                [36m</span>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                [36m>[39m
                  [0mFlight departed late from scheduled time[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</label>[39m
            [36m<label[39m
              [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
                [33mname[39m=[32m"disruptionType"[39m
                [33mtype[39m=[32m"radio"[39m
                [33mvalue[39m=[32m"cancellation"[39m
              [36m/>[39m
              [36m<div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium"[39m
                [36m>[39m
                  [0mFlight Cancelled[0m
                [36m</span>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                [36m>[39m
                  [0mFlight did not operate at all[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</label>[39m
            [36m<label[39m
              [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
                [33mname[39m=[32m"disruptionType"[39m
                [33mtype[39m=[32m"radio"[39m
                [33mvalue[39m=[32m"denied_boarding"[39m
              [36m/>[39m
              [36m<div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium"[39m
                [36m>[39m
                  [0mDenied Boarding[0m
                [36m</span>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                [36m>[39m
                  [0mNot allowed to board despite valid ticket[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</label>[39m
            [36m<label[39m
              [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
                [33mname[39m=[32m"disruptionType"[39m
                [33mtype[39m=[32m"radio"[39m
                [33mvalue[39m=[32m"downgrade"[39m
              [36m/>[39m
              [36m<div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium"[39m
                [36m>[39m
                  [0mSeat Downgrade[0m
                [36m</span>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                [36m>[39m
                  [0mPlaced in lower class than booked[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</label>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
              [33mfor[39m=[32m"departureDate"[39m
            [36m>[39m
              [0mDeparture Date[0m
            [36m</label>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
                [33mid[39m=[32m"departureDate"[39m
                [33mtype[39m=[32m"date"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<p[39m
              [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
            [36m>[39m
              [0mWhen was your flight scheduled to depart?[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
              [33mfor[39m=[32m"flightNumber"[39m
            [36m>[39m
              [0mFlight Number[0m
            [36m</label>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
                [33mid[39m=[32m"flightNumber"[39m
                [33mp...
[90m [2mâ¯[22m Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:[2m163:27[22m[39m
[36m [2mâ¯[22m __tests__/components/FlightLookupForm.test.tsx:[2m183:13[22m[39m
    [90m181| [39m      fireEvent[33m.[39m[34mclick[39m(screen[33m.[39m[34mgetByLabelText[39m([36m/Seat Downgrade/i[39m))[33m;[39m
    [90m182| [39m
    [90m183| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m   | [39m            [31m^[39m
    [90m184| [39m        expect(screen.getByText(/Class Paid For/i)).toBeInTheDocument(â€¦
    [90m185| [39m        expect(screen.getByText(/Class Received/i)).toBeInTheDocument(â€¦

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m __tests__/components/FlightLookupForm.test.tsx[2m > [22mFlightLookupForm - Auto-Calculations[2m > [22mnotice period auto-calculation[2m > [22mshould show dropdown when edit is clicked
[31m[1mTestingLibraryElementError[22m[39m: Found multiple elements with the role "combobox"

Here are the matching elements:

Ignored nodes: comments, script, style
[36m<select[39m
  [33mclass[39m=[32m"w-full px-3 py-2 border border-blue-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500"[39m
  [33mid[39m=[32m"manualNoticeGiven"[39m
[36m>[39m
  [36m<option[39m
    [33mvalue[39m=[32m"< 7 days"[39m
  [36m>[39m
    [0mLess than 7 days before departure[0m
  [36m</option>[39m
  [36m<option[39m
    [33mvalue[39m=[32m"7-14 days"[39m
  [36m>[39m
    [0m7-14 days before departure[0m
  [36m</option>[39m
  [36m<option[39m
    [33mvalue[39m=[32m"> 14 days"[39m
  [36m>[39m
    [0mMore than 14 days before departure[0m
  [36m</option>[39m
[36m</select>[39m

Ignored nodes: comments, script, style
[36m<select[39m
  [33mclass[39m=[32m"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"[39m
  [33mid[39m=[32m"passengerChoice"[39m
[36m>[39m
  [36m<option[39m
    [33mvalue[39m=[32m""[39m
  [36m>[39m
    [0mSelect your choice[0m
  [36m</option>[39m
  [36m<option[39m
    [33mvalue[39m=[32m"refund"[39m
  [36m>[39m
    [0mRequested full refund[0m
  [36m</option>[39m
  [36m<option[39m
    [33mvalue[39m=[32m"re-routing"[39m
  [36m>[39m
    [0mAccepted re-routing/alternative flight[0m
  [36m</option>[39m
  [36m<option[39m
    [33mvalue[39m=[32m"both"[39m
  [36m>[39m
    [0mBoth - refund for original, paid for new[0m
  [36m</option>[39m
[36m</select>[39m

Ignored nodes: comments, script, style
[36m<select[39m
  [33mclass[39m=[32m"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"[39m
  [33mid[39m=[32m"delayReason"[39m
[36m>[39m
  [36m<option[39m
    [33mvalue[39m=[32m""[39m
  [36m>[39m
    [0mSelect reason[0m
  [36m</option>[39m
  [36m<option[39m
    [33mvalue[39m=[32m"Technical issues"[39m
  [36m>[39m
    [0mTechnical issues[0m
  [36m</option>[39m
  [36m<option[39m
    [33mvalue[39m=[32m"Weather conditions"[39m
  [36m>[39m
    [0mWeather conditions[0m
  [36m</option>[39m
  [36m<option[39m
    [33mvalue[39m=[32m"Crew scheduling"[39m
  [36m>[39m
    [0mCrew scheduling[0m
  [36m</option>[39m
  [36m<option[39m
    [33mvalue[39m=[32m"Air traffic control"[39m
  [36m>[39m
    [0mAir traffic control[0m
  [36m</option>[39m
  [36m<option[39m
    [33mvalue[39m=[32m"Security issues"[39m
  [36m>[39m
    [0mSecurity issues[0m
  [36m</option>[39m
  [36m<option[39m
    [33mvalue[39m=[32m"Operational issues"[39m
  [36m>[39m
    [0mOperational issues[0m
  [36m</option>[39m
  [36m<option[39m
    [33mvalue[39m=[32m"Other"[39m
  [36m>[39m
    [0mOther[0m
  [36m</option>[39m
[36m</select>[39m

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<form[39m
      [33mclass[39m=[32m"space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"text-center mb-6"[39m
      [36m>[39m
        [36m<h2[39m
          [33mclass[39m=[32m"text-2xl font-bold text-gray-900 mb-2"[39m
        [36m>[39m
          [0mCheck Your Eligibility[0m
        [36m</h2>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-gray-600"[39m
        [36m>[39m
          [0mWe'll check if you're eligible for compensation in less than 2 minutes[0m
        [36m</p>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"mb-6"[39m
      [36m>[39m
        [36m<label[39m
          [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-3"[39m
        [36m>[39m
          [0mWhat happened to your flight?[0m
        [36m</label>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 sm:grid-cols-2 gap-3"[39m
        [36m>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mchecked[39m=[32m""[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"delay"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mFlight Delayed[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mFlight departed late from scheduled time[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"cancellation"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mFlight Cancelled[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mFlight did not operate at all[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"denied_boarding"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mDenied Boarding[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mNot allowed to board despite valid ticket[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"downgrade"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mSeat Downgrade[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mPlaced in lower class than booked[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
            [33mfor[39m=[32m"departureDate"[39m
          [36m>[39m
            [0mDeparture Date[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
              [33mid[39m=[32m"departureDate"[39m
              [33mtype[39m=[32m"date"[39m
              [33mvalue[39m=[32m"2024-01-15"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
          [36m>[39m
            [0mWhen was your flight scheduled to depart?[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
            [33mfor[39m=[32m"flightNumber"[39m
          [36m>[39m
            [0mFlight Number[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
              [33mid[39m=[32m"flightNumber"[39m
              [33mplaceholder[39m=[32m"e.g., BA123"[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
          [36m>[39m
            [0mFound on your boarding pass or confirmati...

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<form[39m
        [33mclass[39m=[32m"space-y-6"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"text-center mb-6"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-2xl font-bold text-gray-900 mb-2"[39m
          [36m>[39m
            [0mCheck Your Eligibility[0m
          [36m</h2>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600"[39m
          [36m>[39m
            [0mWe'll check if you're eligible for compensation in less than 2 minutes[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-6"[39m
        [36m>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-3"[39m
          [36m>[39m
            [0mWhat happened to your flight?[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 sm:grid-cols-2 gap-3"[39m
          [36m>[39m
            [36m<label[39m
              [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
            [36m>[39m
              [36m<input[39m
                [33mchecked[39m=[32m""[39m
                [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
                [33mname[39m=[32m"disruptionType"[39m
                [33mtype[39m=[32m"radio"[39m
                [33mvalue[39m=[32m"delay"[39m
              [36m/>[39m
              [36m<div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium"[39m
                [36m>[39m
                  [0mFlight Delayed[0m
                [36m</span>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                [36m>[39m
                  [0mFlight departed late from scheduled time[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</label>[39m
            [36m<label[39m
              [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
                [33mname[39m=[32m"disruptionType"[39m
                [33mtype[39m=[32m"radio"[39m
                [33mvalue[39m=[32m"cancellation"[39m
              [36m/>[39m
              [36m<div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium"[39m
                [36m>[39m
                  [0mFlight Cancelled[0m
                [36m</span>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                [36m>[39m
                  [0mFlight did not operate at all[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</label>[39m
            [36m<label[39m
              [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
                [33mname[39m=[32m"disruptionType"[39m
                [33mtype[39m=[32m"radio"[39m
                [33mvalue[39m=[32m"denied_boarding"[39m
              [36m/>[39m
              [36m<div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium"[39m
                [36m>[39m
                  [0mDenied Boarding[0m
                [36m</span>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                [36m>[39m
                  [0mNot allowed to board despite valid ticket[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</label>[39m
            [36m<label[39m
              [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
                [33mname[39m=[32m"disruptionType"[39m
                [33mtype[39m=[32m"radio"[39m
                [33mvalue[39m=[32m"downgrade"[39m
              [36m/>[39m
              [36m<div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium"[39m
                [36m>[39m
                  [0mSeat Downgrade[0m
                [36m</span>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                [36m>[39m
                  [0mPlaced in lower class than booked[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</label>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
              [33mfor[39m=[32m"departureDate"[39m
            [36m>[39m
              [0mDeparture Date[0m
            [36m</label>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
                [33mid[39m=[32m"departureDate"[39m
                [33mtype[39m=[32m"date"[39m
                [33mvalue[39m=[32m"2024-01-15"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<p[39m
              [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
            [36m>[39m
              [0mWhen was your flight scheduled to depart?[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
              [33mfor[39m=[32m"flightNumber"[39m
            [36m>[39m
              [0mFlight Number[0m
            [36m</label>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
                [33mid[39m=[32m"flightNumber"[39m
            ...
[90m [2mâ¯[22m Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:[2m163:27[22m[39m
[36m [2mâ¯[22m __tests__/components/FlightLookupForm.test.tsx:[2m252:13[22m[39m
    [90m250| [39m
    [90m251| [39m      [90m// Dropdown should appear[39m
    [90m252| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m   | [39m            [31m^[39m
    [90m253| [39m        [34mexpect[39m(screen[33m.[39m[34mgetByRole[39m([32m'combobox'[39m))[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m254| [39m      })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m __tests__/components/FlightLookupForm.test.tsx[2m > [22mFlightLookupForm - Visual Route Grouping[2m > [22mshould show direction arrow between airport fields
[31m[1mTestingLibraryElementError[22m[39m: Found multiple elements with the text: /â†’/

Here are the matching elements:

Ignored nodes: comments, script, style
[36m<div[39m
  [33mclass[39m=[32m"text-2xl text-blue-500 pb-2 hidden sm:block"[39m
[36m>[39m
  [0mâ†’[0m
[36m</div>[39m

Ignored nodes: comments, script, style
[36m<span[39m
  [33mclass[39m=[32m"relative z-10"[39m
[36m>[39m
  [0mCheck My Compensation â†’[0m
[36m</span>[39m

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<form[39m
      [33mclass[39m=[32m"space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"text-center mb-6"[39m
      [36m>[39m
        [36m<h2[39m
          [33mclass[39m=[32m"text-2xl font-bold text-gray-900 mb-2"[39m
        [36m>[39m
          [0mCheck Your Eligibility[0m
        [36m</h2>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-gray-600"[39m
        [36m>[39m
          [0mWe'll check if you're eligible for compensation in less than 2 minutes[0m
        [36m</p>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"mb-6"[39m
      [36m>[39m
        [36m<label[39m
          [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-3"[39m
        [36m>[39m
          [0mWhat happened to your flight?[0m
        [36m</label>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 sm:grid-cols-2 gap-3"[39m
        [36m>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mchecked[39m=[32m""[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"delay"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mFlight Delayed[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mFlight departed late from scheduled time[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"cancellation"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mFlight Cancelled[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mFlight did not operate at all[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"denied_boarding"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mDenied Boarding[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mNot allowed to board despite valid ticket[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"downgrade"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mSeat Downgrade[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mPlaced in lower class than booked[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
            [33mfor[39m=[32m"departureDate"[39m
          [36m>[39m
            [0mDeparture Date[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
              [33mid[39m=[32m"departureDate"[39m
              [33mtype[39m=[32m"date"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
          [36m>[39m
            [0mWhen was your flight scheduled to depart?[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
            [33mfor[39m=[32m"flightNumber"[39m
          [36m>[39m
            [0mFlight Number[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
              [33mid[39m=[32m"flightNumber"[39m
              [33mplaceholder[39m=[32m"e.g., BA123"[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
          [36m>[39m
            [0mFound on your boarding pass or confirmation email[...
[90m [2mâ¯[22m Object.getElementError node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2mâ¯[22m getElementError node_modules/@testing-library/dom/dist/query-helpers.js:[2m20:35[22m[39m
[90m [2mâ¯[22m getMultipleElementsFoundError node_modules/@testing-library/dom/dist/query-helpers.js:[2m23:10[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/dom/dist/query-helpers.js:[2m55:13[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2mâ¯[22m __tests__/components/FlightLookupForm.test.tsx:[2m291:30[22m[39m
    [90m289| [39m    [34mexpect[39m(screen[33m.[39m[34mgetByText[39m([36m/Route/i[39m))[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m290| [39m    [90m// Check for direction arrow in the DOM[39m
    [90m291| [39m    [35mconst[39m arrowIcon [33m=[39m screen[33m.[39m[34mgetByText[39m([36m/â†’/[39m)[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m292| [39m    [34mexpect[39m(arrowIcon)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m293| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m __tests__/components/FlightLookupForm.test.tsx[2m > [22mFlightLookupForm - Ticket Price with Round-Trip[2m > [22mshould show round-trip checkbox for denied boarding
[31m[1mTestingLibraryElementError[22m[39m: Unable to find a label with the text of: /This was a round-trip ticket/i

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<form[39m
      [33mclass[39m=[32m"space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"text-center mb-6"[39m
      [36m>[39m
        [36m<h2[39m
          [33mclass[39m=[32m"text-2xl font-bold text-gray-900 mb-2"[39m
        [36m>[39m
          [0mCheck Your Eligibility[0m
        [36m</h2>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-gray-600"[39m
        [36m>[39m
          [0mWe'll check if you're eligible for compensation in less than 2 minutes[0m
        [36m</p>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"mb-6"[39m
      [36m>[39m
        [36m<label[39m
          [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-3"[39m
        [36m>[39m
          [0mWhat happened to your flight?[0m
        [36m</label>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 sm:grid-cols-2 gap-3"[39m
        [36m>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mchecked[39m=[32m""[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"delay"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mFlight Delayed[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mFlight departed late from scheduled time[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"cancellation"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mFlight Cancelled[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mFlight did not operate at all[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"denied_boarding"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mDenied Boarding[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mNot allowed to board despite valid ticket[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"downgrade"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mSeat Downgrade[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mPlaced in lower class than booked[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
            [33mfor[39m=[32m"departureDate"[39m
          [36m>[39m
            [0mDeparture Date[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
              [33mid[39m=[32m"departureDate"[39m
              [33mtype[39m=[32m"date"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
          [36m>[39m
            [0mWhen was your flight scheduled to depart?[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
            [33mfor[39m=[32m"flightNumber"[39m
          [36m>[39m
            [0mFlight Number[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
              [33mid[39m=[32m"flightNumber"[39m
              [33mplaceholder[39m=[32m"e.g., BA123"[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
          [36m>[39m
            [0mFound on your boarding pass or confirmation email[...
[90m [2mâ¯[22m Object.getElementError node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2mâ¯[22m getAllByLabelText node_modules/@testing-library/dom/dist/queries/label-text.js:[2m111:38[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/dom/dist/query-helpers.js:[2m52:17[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2mâ¯[22m __tests__/components/FlightLookupForm.test.tsx:[2m360:19[22m[39m
    [90m358| [39m    fireEvent[33m.[39m[34mclick[39m(screen[33m.[39m[34mgetByLabelText[39m([36m/Denied Boarding/i[39m))[33m;[39m
    [90m359| [39m
    [90m360| [39m    expect(screen.getByLabelText(/This was a round-trip ticket/i)).toBâ€¦
    [90m   | [39m                  [31m^[39m
    [90m361| [39m  })[33m;[39m
    [90m362| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m __tests__/components/FlightLookupForm.test.tsx[2m > [22mFlightLookupForm - Ticket Price with Round-Trip[2m > [22mshould show round-trip checkbox for downgrade
[31m[1mTestingLibraryElementError[22m[39m: Unable to find a label with the text of: /This was a round-trip ticket/i

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<form[39m
      [33mclass[39m=[32m"space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"text-center mb-6"[39m
      [36m>[39m
        [36m<h2[39m
          [33mclass[39m=[32m"text-2xl font-bold text-gray-900 mb-2"[39m
        [36m>[39m
          [0mCheck Your Eligibility[0m
        [36m</h2>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-gray-600"[39m
        [36m>[39m
          [0mWe'll check if you're eligible for compensation in less than 2 minutes[0m
        [36m</p>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"mb-6"[39m
      [36m>[39m
        [36m<label[39m
          [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-3"[39m
        [36m>[39m
          [0mWhat happened to your flight?[0m
        [36m</label>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 sm:grid-cols-2 gap-3"[39m
        [36m>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mchecked[39m=[32m""[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"delay"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mFlight Delayed[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mFlight departed late from scheduled time[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"cancellation"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mFlight Cancelled[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mFlight did not operate at all[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"denied_boarding"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mDenied Boarding[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mNot allowed to board despite valid ticket[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"downgrade"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mSeat Downgrade[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mPlaced in lower class than booked[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
            [33mfor[39m=[32m"departureDate"[39m
          [36m>[39m
            [0mDeparture Date[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
              [33mid[39m=[32m"departureDate"[39m
              [33mtype[39m=[32m"date"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
          [36m>[39m
            [0mWhen was your flight scheduled to depart?[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
            [33mfor[39m=[32m"flightNumber"[39m
          [36m>[39m
            [0mFlight Number[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
              [33mid[39m=[32m"flightNumber"[39m
              [33mplaceholder[39m=[32m"e.g., BA123"[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
          [36m>[39m
            [0mFound on your boarding pass or confirmation email[...
[90m [2mâ¯[22m Object.getElementError node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2mâ¯[22m getAllByLabelText node_modules/@testing-library/dom/dist/queries/label-text.js:[2m111:38[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/dom/dist/query-helpers.js:[2m52:17[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2mâ¯[22m __tests__/components/FlightLookupForm.test.tsx:[2m368:19[22m[39m
    [90m366| [39m    fireEvent[33m.[39m[34mclick[39m(screen[33m.[39m[34mgetByLabelText[39m([36m/Seat Downgrade/i[39m))[33m;[39m
    [90m367| [39m
    [90m368| [39m    expect(screen.getByLabelText(/This was a round-trip ticket/i)).toBâ€¦
    [90m   | [39m                  [31m^[39m
    [90m369| [39m  })[33m;[39m
    [90m370| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[7/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m __tests__/components/FlightLookupForm.test.tsx[2m > [22mFlightLookupForm - Validation[2m > [22mshould validate flight number format
[31m[1mTestingLibraryElementError[22m[39m: Unable to find an element with the text: /Invalid flight number format/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<form[39m
      [33mclass[39m=[32m"space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"text-center mb-6"[39m
      [36m>[39m
        [36m<h2[39m
          [33mclass[39m=[32m"text-2xl font-bold text-gray-900 mb-2"[39m
        [36m>[39m
          [0mCheck Your Eligibility[0m
        [36m</h2>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-gray-600"[39m
        [36m>[39m
          [0mWe'll check if you're eligible for compensation in less than 2 minutes[0m
        [36m</p>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"mb-6"[39m
      [36m>[39m
        [36m<label[39m
          [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-3"[39m
        [36m>[39m
          [0mWhat happened to your flight?[0m
        [36m</label>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 sm:grid-cols-2 gap-3"[39m
        [36m>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mchecked[39m=[32m""[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"delay"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mFlight Delayed[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mFlight departed late from scheduled time[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"cancellation"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mFlight Cancelled[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mFlight did not operate at all[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"denied_boarding"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mDenied Boarding[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mNot allowed to board despite valid ticket[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"downgrade"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mSeat Downgrade[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mPlaced in lower class than booked[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
            [33mfor[39m=[32m"departureDate"[39m
          [36m>[39m
            [0mDeparture Date[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
              [33mid[39m=[32m"departureDate"[39m
              [33mtype[39m=[32m"date"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
          [36m>[39m
            [0mWhen was your flight scheduled to depart?[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
            [33mfor[39m=[32m"flightNumber"[39m
          [36m>[39m
            [0mFlight Number[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-red-500"[39m
              [33mid[39m=[32m"flightNumber"[39m
              [33mplaceholder[39m=[32m"e.g., BA123"[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m"123"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-1 text-sm text-red-600"[39m
          [36m>[39m
            [0mFlight number should be airline code (2 letters) f...

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<form[39m
        [33mclass[39m=[32m"space-y-6"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"text-center mb-6"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-2xl font-bold text-gray-900 mb-2"[39m
          [36m>[39m
            [0mCheck Your Eligibility[0m
          [36m</h2>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600"[39m
          [36m>[39m
            [0mWe'll check if you're eligible for compensation in less than 2 minutes[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-6"[39m
        [36m>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-3"[39m
          [36m>[39m
            [0mWhat happened to your flight?[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 sm:grid-cols-2 gap-3"[39m
          [36m>[39m
            [36m<label[39m
              [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
            [36m>[39m
              [36m<input[39m
                [33mchecked[39m=[32m""[39m
                [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
                [33mname[39m=[32m"disruptionType"[39m
                [33mtype[39m=[32m"radio"[39m
                [33mvalue[39m=[32m"delay"[39m
              [36m/>[39m
              [36m<div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium"[39m
                [36m>[39m
                  [0mFlight Delayed[0m
                [36m</span>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                [36m>[39m
                  [0mFlight departed late from scheduled time[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</label>[39m
            [36m<label[39m
              [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
                [33mname[39m=[32m"disruptionType"[39m
                [33mtype[39m=[32m"radio"[39m
                [33mvalue[39m=[32m"cancellation"[39m
              [36m/>[39m
              [36m<div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium"[39m
                [36m>[39m
                  [0mFlight Cancelled[0m
                [36m</span>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                [36m>[39m
                  [0mFlight did not operate at all[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</label>[39m
            [36m<label[39m
              [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
                [33mname[39m=[32m"disruptionType"[39m
                [33mtype[39m=[32m"radio"[39m
                [33mvalue[39m=[32m"denied_boarding"[39m
              [36m/>[39m
              [36m<div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium"[39m
                [36m>[39m
                  [0mDenied Boarding[0m
                [36m</span>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                [36m>[39m
                  [0mNot allowed to board despite valid ticket[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</label>[39m
            [36m<label[39m
              [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
                [33mname[39m=[32m"disruptionType"[39m
                [33mtype[39m=[32m"radio"[39m
                [33mvalue[39m=[32m"downgrade"[39m
              [36m/>[39m
              [36m<div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium"[39m
                [36m>[39m
                  [0mSeat Downgrade[0m
                [36m</span>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                [36m>[39m
                  [0mPlaced in lower class than booked[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</label>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
              [33mfor[39m=[32m"departureDate"[39m
            [36m>[39m
              [0mDeparture Date[0m
            [36m</label>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
                [33mid[39m=[32m"departureDate"[39m
                [33mtype[39m=[32m"date"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<p[39m
              [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
            [36m>[39m
              [0mWhen was your flight scheduled to depart?[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
              [33mfor[39m=[32m"flightNumber"[39m
            [36m>[39m
              [0mFlight Number[0m
            [36m</label>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-red-500"[39m
                [33mid[39m=[32m"flightNumber"[39m
                [33mpl...
[90m [2mâ¯[22m Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:[2m163:27[22m[39m
[36m [2mâ¯[22m __tests__/components/FlightLookupForm.test.tsx:[2m415:11[22m[39m
    [90m413| [39m    fireEvent[33m.[39m[34mblur[39m(flightNumberInput)[33m;[39m
    [90m414| [39m
    [90m415| [39m    [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m   | [39m          [31m^[39m
    [90m416| [39m      expect(screen.getByText(/Invalid flight number format/i)).toBeInâ€¦
    [90m417| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[8/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m __tests__/components/FlightLookupForm.test.tsx[2m > [22mFlightLookupForm - Validation[2m > [22mshould clear error when user starts typing
[31m[1mTestingLibraryElementError[22m[39m: Unable to find an element with the text: /Invalid flight number format/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<form[39m
      [33mclass[39m=[32m"space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"text-center mb-6"[39m
      [36m>[39m
        [36m<h2[39m
          [33mclass[39m=[32m"text-2xl font-bold text-gray-900 mb-2"[39m
        [36m>[39m
          [0mCheck Your Eligibility[0m
        [36m</h2>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-gray-600"[39m
        [36m>[39m
          [0mWe'll check if you're eligible for compensation in less than 2 minutes[0m
        [36m</p>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"mb-6"[39m
      [36m>[39m
        [36m<label[39m
          [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-3"[39m
        [36m>[39m
          [0mWhat happened to your flight?[0m
        [36m</label>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 sm:grid-cols-2 gap-3"[39m
        [36m>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mchecked[39m=[32m""[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"delay"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mFlight Delayed[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mFlight departed late from scheduled time[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"cancellation"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mFlight Cancelled[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mFlight did not operate at all[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"denied_boarding"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mDenied Boarding[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mNot allowed to board despite valid ticket[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"downgrade"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mSeat Downgrade[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mPlaced in lower class than booked[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
            [33mfor[39m=[32m"departureDate"[39m
          [36m>[39m
            [0mDeparture Date[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
              [33mid[39m=[32m"departureDate"[39m
              [33mtype[39m=[32m"date"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
          [36m>[39m
            [0mWhen was your flight scheduled to depart?[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
            [33mfor[39m=[32m"flightNumber"[39m
          [36m>[39m
            [0mFlight Number[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-red-500"[39m
              [33mid[39m=[32m"flightNumber"[39m
              [33mplaceholder[39m=[32m"e.g., BA123"[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m"123"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-1 text-sm text-red-600"[39m
          [36m>[39m
            [0mFlight number should be airline code (2 letters) f...

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<form[39m
        [33mclass[39m=[32m"space-y-6"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"text-center mb-6"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-2xl font-bold text-gray-900 mb-2"[39m
          [36m>[39m
            [0mCheck Your Eligibility[0m
          [36m</h2>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600"[39m
          [36m>[39m
            [0mWe'll check if you're eligible for compensation in less than 2 minutes[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-6"[39m
        [36m>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-3"[39m
          [36m>[39m
            [0mWhat happened to your flight?[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 sm:grid-cols-2 gap-3"[39m
          [36m>[39m
            [36m<label[39m
              [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
            [36m>[39m
              [36m<input[39m
                [33mchecked[39m=[32m""[39m
                [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
                [33mname[39m=[32m"disruptionType"[39m
                [33mtype[39m=[32m"radio"[39m
                [33mvalue[39m=[32m"delay"[39m
              [36m/>[39m
              [36m<div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium"[39m
                [36m>[39m
                  [0mFlight Delayed[0m
                [36m</span>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                [36m>[39m
                  [0mFlight departed late from scheduled time[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</label>[39m
            [36m<label[39m
              [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
                [33mname[39m=[32m"disruptionType"[39m
                [33mtype[39m=[32m"radio"[39m
                [33mvalue[39m=[32m"cancellation"[39m
              [36m/>[39m
              [36m<div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium"[39m
                [36m>[39m
                  [0mFlight Cancelled[0m
                [36m</span>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                [36m>[39m
                  [0mFlight did not operate at all[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</label>[39m
            [36m<label[39m
              [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
                [33mname[39m=[32m"disruptionType"[39m
                [33mtype[39m=[32m"radio"[39m
                [33mvalue[39m=[32m"denied_boarding"[39m
              [36m/>[39m
              [36m<div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium"[39m
                [36m>[39m
                  [0mDenied Boarding[0m
                [36m</span>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                [36m>[39m
                  [0mNot allowed to board despite valid ticket[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</label>[39m
            [36m<label[39m
              [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
                [33mname[39m=[32m"disruptionType"[39m
                [33mtype[39m=[32m"radio"[39m
                [33mvalue[39m=[32m"downgrade"[39m
              [36m/>[39m
              [36m<div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium"[39m
                [36m>[39m
                  [0mSeat Downgrade[0m
                [36m</span>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                [36m>[39m
                  [0mPlaced in lower class than booked[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</label>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
              [33mfor[39m=[32m"departureDate"[39m
            [36m>[39m
              [0mDeparture Date[0m
            [36m</label>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
                [33mid[39m=[32m"departureDate"[39m
                [33mtype[39m=[32m"date"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<p[39m
              [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
            [36m>[39m
              [0mWhen was your flight scheduled to depart?[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
              [33mfor[39m=[32m"flightNumber"[39m
            [36m>[39m
              [0mFlight Number[0m
            [36m</label>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-red-500"[39m
                [33mid[39m=[32m"flightNumber"[39m
                [33mpl...
[90m [2mâ¯[22m Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:[2m163:27[22m[39m
[36m [2mâ¯[22m __tests__/components/FlightLookupForm.test.tsx:[2m429:11[22m[39m
    [90m427| [39m    fireEvent[33m.[39m[34mblur[39m(flightNumberInput)[33m;[39m
    [90m428| [39m
    [90m429| [39m    [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m   | [39m          [31m^[39m
    [90m430| [39m      expect(screen.getByText(/Invalid flight number format/i)).toBeInâ€¦
    [90m431| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[9/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m __tests__/integration/formSubmission.test.tsx[2m > [22mIntegration: Delay Claim Submission[2m > [22mshould submit a complete delay claim successfully
[31m[1mTestingLibraryElementError[22m[39m: Unable to find an element with the placeholder text of: 0

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<form[39m
      [33mclass[39m=[32m"space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"text-center mb-6"[39m
      [36m>[39m
        [36m<h2[39m
          [33mclass[39m=[32m"text-2xl font-bold text-gray-900 mb-2"[39m
        [36m>[39m
          [0mCheck Your Eligibility[0m
        [36m</h2>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-gray-600"[39m
        [36m>[39m
          [0mWe'll check if you're eligible for compensation in less than 2 minutes[0m
        [36m</p>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"mb-6"[39m
      [36m>[39m
        [36m<label[39m
          [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-3"[39m
        [36m>[39m
          [0mWhat happened to your flight?[0m
        [36m</label>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 sm:grid-cols-2 gap-3"[39m
        [36m>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mchecked[39m=[32m""[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"delay"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mFlight Delayed[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mFlight departed late from scheduled time[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"cancellation"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mFlight Cancelled[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mFlight did not operate at all[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"denied_boarding"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mDenied Boarding[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mNot allowed to board despite valid ticket[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"downgrade"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mSeat Downgrade[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mPlaced in lower class than booked[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
            [33mfor[39m=[32m"departureDate"[39m
          [36m>[39m
            [0mDeparture Date[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
              [33mid[39m=[32m"departureDate"[39m
              [33mtype[39m=[32m"date"[39m
              [33mvalue[39m=[32m"2024-01-15"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
          [36m>[39m
            [0mWhen was your flight scheduled to depart?[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
            [33mfor[39m=[32m"flightNumber"[39m
          [36m>[39m
            [0mFlight Number[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
              [33mid[39m=[32m"flightNumber"[39m
              [33mplaceholder[39m=[32m"e.g., BA123"[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m"BA123"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
          [36m>[39m
            [0mFound on your boarding pass or confi...

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<form[39m
      [33mclass[39m=[32m"space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"text-center mb-6"[39m
      [36m>[39m
        [36m<h2[39m
          [33mclass[39m=[32m"text-2xl font-bold text-gray-900 mb-2"[39m
        [36m>[39m
          [0mCheck Your Eligibility[0m
        [36m</h2>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-gray-600"[39m
        [36m>[39m
          [0mWe'll check if you're eligible for compensation in less than 2 minutes[0m
        [36m</p>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"mb-6"[39m
      [36m>[39m
        [36m<label[39m
          [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-3"[39m
        [36m>[39m
          [0mWhat happened to your flight?[0m
        [36m</label>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 sm:grid-cols-2 gap-3"[39m
        [36m>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mchecked[39m=[32m""[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"delay"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mFlight Delayed[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mFlight departed late from scheduled time[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"cancellation"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mFlight Cancelled[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mFlight did not operate at all[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"denied_boarding"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mDenied Boarding[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mNot allowed to board despite valid ticket[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"downgrade"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mSeat Downgrade[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mPlaced in lower class than booked[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
            [33mfor[39m=[32m"departureDate"[39m
          [36m>[39m
            [0mDeparture Date[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
              [33mid[39m=[32m"departureDate"[39m
              [33mtype[39m=[32m"date"[39m
              [33mvalue[39m=[32m"2024-01-15"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
          [36m>[39m
            [0mWhen was your flight scheduled to depart?[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
            [33mfor[39m=[32m"flightNumber"[39m
          [36m>[39m
            [0mFlight Number[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
              [33mid[39m=[32m"flightNumber"[39m
              [33mplaceholder[39m=[32m"e.g., BA123"[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m"BA123"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
          [36m>[39m
            [0mFound on your boarding pass or confi...
[90m [2mâ¯[22m waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:[2m163:27[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/dom/dist/query-helpers.js:[2m86:33[22m[39m
[36m [2mâ¯[22m __tests__/integration/formSubmission.test.tsx:[2m103:38[22m[39m
    [90m101| [39m
    [90m102| [39m    [90m// Step 3: Fill delay-specific fields[39m
    [90m103| [39m    [35mconst[39m delayInputs [33m=[39m [35mawait[39m screen[33m.[39m[34mfindAllByPlaceholderText[39m([32m'0'[39m)[33m;[39m
    [90m   | [39m                                     [31m^[39m
    [90m104| [39m    [35mconst[39m delayHoursInput [33m=[39m delayInputs[[34m0[39m][33m;[39m
    [90m105| [39m    [35mconst[39m delayMinutesInput [33m=[39m delayInputs[[34m1[39m][33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[10/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m __tests__/integration/formSubmission.test.tsx[2m > [22mIntegration: Cancellation Claim with Alternative Flight[2m > [22mshould submit cancellation claim with alternative flight and structured timing
[31m[1mAssertionError[22m[39m: expected "vi.fn()" to be called 1 times, but got 0 times

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<form[39m
        [33mclass[39m=[32m"space-y-6"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"text-center mb-6"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-2xl font-bold text-gray-900 mb-2"[39m
          [36m>[39m
            [0mCheck Your Eligibility[0m
          [36m</h2>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600"[39m
          [36m>[39m
            [0mWe'll check if you're eligible for compensation in less than 2 minutes[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-6"[39m
        [36m>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-3"[39m
          [36m>[39m
            [0mWhat happened to your flight?[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 sm:grid-cols-2 gap-3"[39m
          [36m>[39m
            [36m<label[39m
              [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
            [36m>[39m
              [36m<input[39m
                [33mchecked[39m=[32m""[39m
                [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
                [33mname[39m=[32m"disruptionType"[39m
                [33mtype[39m=[32m"radio"[39m
                [33mvalue[39m=[32m"delay"[39m
              [36m/>[39m
              [36m<div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium"[39m
                [36m>[39m
                  [0mFlight Delayed[0m
                [36m</span>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                [36m>[39m
                  [0mFlight departed late from scheduled time[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</label>[39m
            [36m<label[39m
              [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
                [33mname[39m=[32m"disruptionType"[39m
                [33mtype[39m=[32m"radio"[39m
                [33mvalue[39m=[32m"cancellation"[39m
              [36m/>[39m
              [36m<div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium"[39m
                [36m>[39m
                  [0mFlight Cancelled[0m
                [36m</span>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                [36m>[39m
                  [0mFlight did not operate at all[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</label>[39m
            [36m<label[39m
              [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
                [33mname[39m=[32m"disruptionType"[39m
                [33mtype[39m=[32m"radio"[39m
                [33mvalue[39m=[32m"denied_boarding"[39m
              [36m/>[39m
              [36m<div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium"[39m
                [36m>[39m
                  [0mDenied Boarding[0m
                [36m</span>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                [36m>[39m
                  [0mNot allowed to board despite valid ticket[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</label>[39m
            [36m<label[39m
              [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
                [33mname[39m=[32m"disruptionType"[39m
                [33mtype[39m=[32m"radio"[39m
                [33mvalue[39m=[32m"downgrade"[39m
              [36m/>[39m
              [36m<div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium"[39m
                [36m>[39m
                  [0mSeat Downgrade[0m
                [36m</span>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                [36m>[39m
                  [0mPlaced in lower class than booked[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</label>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
              [33mfor[39m=[32m"departureDate"[39m
            [36m>[39m
              [0mDeparture Date[0m
            [36m</label>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
                [33mid[39m=[32m"departureDate"[39m
                [33mtype[39m=[32m"date"[39m
                [33mvalue[39m=[32m"2024-01-15"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<p[39m
              [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
            [36m>[39m
              [0mWhen was your flight scheduled to depart?[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
              [33mfor[39m=[32m"flightNumber"[39m
            [36m>[39m
              [0mFlight Number[0m
            [36m</label>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
                [33mid[39m=[32m"flightNumber"[39m
            ...
[36m [2mâ¯[22m __tests__/integration/formSubmission.test.tsx:[2m239:25[22m[39m
    [90m237| [39m
    [90m238| [39m    [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m239| [39m      [34mexpect[39m(mockFetch)[33m.[39m[34mtoHaveBeenCalledTimes[39m([34m1[39m)[33m;[39m
    [90m   | [39m                        [31m^[39m
    [90m240| [39m    })[33m;[39m
    [90m241| [39m
[90m [2mâ¯[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2mâ¯[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2mâ¯[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[11/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m __tests__/integration/formSubmission.test.tsx[2m > [22mIntegration: Cancellation Claim with Alternative Flight[2m > [22mshould allow user to correct auto-calculated notice period
[31m[1mTestingLibraryElementError[22m[39m: Found multiple elements with the role "combobox"

Here are the matching elements:

Ignored nodes: comments, script, style
[36m<select[39m
  [33mclass[39m=[32m"w-full px-3 py-2 border border-blue-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500"[39m
  [33mid[39m=[32m"manualNoticeGiven"[39m
[36m>[39m
  [36m<option[39m
    [33mvalue[39m=[32m"< 7 days"[39m
  [36m>[39m
    [0mLess than 7 days before departure[0m
  [36m</option>[39m
  [36m<option[39m
    [33mvalue[39m=[32m"7-14 days"[39m
  [36m>[39m
    [0m7-14 days before departure[0m
  [36m</option>[39m
  [36m<option[39m
    [33mvalue[39m=[32m"> 14 days"[39m
  [36m>[39m
    [0mMore than 14 days before departure[0m
  [36m</option>[39m
[36m</select>[39m

Ignored nodes: comments, script, style
[36m<select[39m
  [33mclass[39m=[32m"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"[39m
  [33mid[39m=[32m"passengerChoice"[39m
[36m>[39m
  [36m<option[39m
    [33mvalue[39m=[32m""[39m
  [36m>[39m
    [0mSelect your choice[0m
  [36m</option>[39m
  [36m<option[39m
    [33mvalue[39m=[32m"refund"[39m
  [36m>[39m
    [0mRequested full refund[0m
  [36m</option>[39m
  [36m<option[39m
    [33mvalue[39m=[32m"re-routing"[39m
  [36m>[39m
    [0mAccepted re-routing/alternative flight[0m
  [36m</option>[39m
  [36m<option[39m
    [33mvalue[39m=[32m"both"[39m
  [36m>[39m
    [0mBoth - refund for original, paid for new[0m
  [36m</option>[39m
[36m</select>[39m

Ignored nodes: comments, script, style
[36m<select[39m
  [33mclass[39m=[32m"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"[39m
  [33mid[39m=[32m"delayReason"[39m
[36m>[39m
  [36m<option[39m
    [33mvalue[39m=[32m""[39m
  [36m>[39m
    [0mSelect reason[0m
  [36m</option>[39m
  [36m<option[39m
    [33mvalue[39m=[32m"Technical issues"[39m
  [36m>[39m
    [0mTechnical issues[0m
  [36m</option>[39m
  [36m<option[39m
    [33mvalue[39m=[32m"Weather conditions"[39m
  [36m>[39m
    [0mWeather conditions[0m
  [36m</option>[39m
  [36m<option[39m
    [33mvalue[39m=[32m"Crew scheduling"[39m
  [36m>[39m
    [0mCrew scheduling[0m
  [36m</option>[39m
  [36m<option[39m
    [33mvalue[39m=[32m"Air traffic control"[39m
  [36m>[39m
    [0mAir traffic control[0m
  [36m</option>[39m
  [36m<option[39m
    [33mvalue[39m=[32m"Security issues"[39m
  [36m>[39m
    [0mSecurity issues[0m
  [36m</option>[39m
  [36m<option[39m
    [33mvalue[39m=[32m"Operational issues"[39m
  [36m>[39m
    [0mOperational issues[0m
  [36m</option>[39m
  [36m<option[39m
    [33mvalue[39m=[32m"Other"[39m
  [36m>[39m
    [0mOther[0m
  [36m</option>[39m
[36m</select>[39m

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<form[39m
      [33mclass[39m=[32m"space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"text-center mb-6"[39m
      [36m>[39m
        [36m<h2[39m
          [33mclass[39m=[32m"text-2xl font-bold text-gray-900 mb-2"[39m
        [36m>[39m
          [0mCheck Your Eligibility[0m
        [36m</h2>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-gray-600"[39m
        [36m>[39m
          [0mWe'll check if you're eligible for compensation in less than 2 minutes[0m
        [36m</p>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"mb-6"[39m
      [36m>[39m
        [36m<label[39m
          [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-3"[39m
        [36m>[39m
          [0mWhat happened to your flight?[0m
        [36m</label>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 sm:grid-cols-2 gap-3"[39m
        [36m>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mchecked[39m=[32m""[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"delay"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mFlight Delayed[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mFlight departed late from scheduled time[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"cancellation"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mFlight Cancelled[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mFlight did not operate at all[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"denied_boarding"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mDenied Boarding[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mNot allowed to board despite valid ticket[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"downgrade"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mSeat Downgrade[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mPlaced in lower class than booked[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
            [33mfor[39m=[32m"departureDate"[39m
          [36m>[39m
            [0mDeparture Date[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
              [33mid[39m=[32m"departureDate"[39m
              [33mtype[39m=[32m"date"[39m
              [33mvalue[39m=[32m"2024-01-15"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
          [36m>[39m
            [0mWhen was your flight scheduled to depart?[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
            [33mfor[39m=[32m"flightNumber"[39m
          [36m>[39m
            [0mFlight Number[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
              [33mid[39m=[32m"flightNumber"[39m
              [33mplaceholder[39m=[32m"e.g., BA123"[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
          [36m>[39m
            [0mFound on your boarding pass or confirmati...

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<form[39m
        [33mclass[39m=[32m"space-y-6"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"text-center mb-6"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-2xl font-bold text-gray-900 mb-2"[39m
          [36m>[39m
            [0mCheck Your Eligibility[0m
          [36m</h2>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600"[39m
          [36m>[39m
            [0mWe'll check if you're eligible for compensation in less than 2 minutes[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-6"[39m
        [36m>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-3"[39m
          [36m>[39m
            [0mWhat happened to your flight?[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 sm:grid-cols-2 gap-3"[39m
          [36m>[39m
            [36m<label[39m
              [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
            [36m>[39m
              [36m<input[39m
                [33mchecked[39m=[32m""[39m
                [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
                [33mname[39m=[32m"disruptionType"[39m
                [33mtype[39m=[32m"radio"[39m
                [33mvalue[39m=[32m"delay"[39m
              [36m/>[39m
              [36m<div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium"[39m
                [36m>[39m
                  [0mFlight Delayed[0m
                [36m</span>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                [36m>[39m
                  [0mFlight departed late from scheduled time[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</label>[39m
            [36m<label[39m
              [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
                [33mname[39m=[32m"disruptionType"[39m
                [33mtype[39m=[32m"radio"[39m
                [33mvalue[39m=[32m"cancellation"[39m
              [36m/>[39m
              [36m<div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium"[39m
                [36m>[39m
                  [0mFlight Cancelled[0m
                [36m</span>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                [36m>[39m
                  [0mFlight did not operate at all[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</label>[39m
            [36m<label[39m
              [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
                [33mname[39m=[32m"disruptionType"[39m
                [33mtype[39m=[32m"radio"[39m
                [33mvalue[39m=[32m"denied_boarding"[39m
              [36m/>[39m
              [36m<div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium"[39m
                [36m>[39m
                  [0mDenied Boarding[0m
                [36m</span>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                [36m>[39m
                  [0mNot allowed to board despite valid ticket[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</label>[39m
            [36m<label[39m
              [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
                [33mname[39m=[32m"disruptionType"[39m
                [33mtype[39m=[32m"radio"[39m
                [33mvalue[39m=[32m"downgrade"[39m
              [36m/>[39m
              [36m<div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium"[39m
                [36m>[39m
                  [0mSeat Downgrade[0m
                [36m</span>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                [36m>[39m
                  [0mPlaced in lower class than booked[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</label>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
              [33mfor[39m=[32m"departureDate"[39m
            [36m>[39m
              [0mDeparture Date[0m
            [36m</label>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
                [33mid[39m=[32m"departureDate"[39m
                [33mtype[39m=[32m"date"[39m
                [33mvalue[39m=[32m"2024-01-15"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<p[39m
              [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
            [36m>[39m
              [0mWhen was your flight scheduled to depart?[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
              [33mfor[39m=[32m"flightNumber"[39m
            [36m>[39m
              [0mFlight Number[0m
            [36m</label>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
                [33mid[39m=[32m"flightNumber"[39m
            ...
[90m [2mâ¯[22m Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:[2m163:27[22m[39m
[36m [2mâ¯[22m __tests__/integration/formSubmission.test.tsx:[2m283:11[22m[39m
    [90m281| [39m
    [90m282| [39m    [90m// Dropdown should appear[39m
    [90m283| [39m    [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m   | [39m          [31m^[39m
    [90m284| [39m      [35mconst[39m dropdown [33m=[39m screen[33m.[39m[34mgetByRole[39m([32m'combobox'[39m)[33m;[39m
    [90m285| [39m      [34mexpect[39m(dropdown)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[12/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m __tests__/integration/formSubmission.test.tsx[2m > [22mIntegration: Denied Boarding with Alternative Flight[2m > [22mshould submit denied boarding claim with structured alternative delay tiers
[31m[1mTestingLibraryElementError[22m[39m: Unable to find a label with the text of: /What time did you check in/i

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<form[39m
      [33mclass[39m=[32m"space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"text-center mb-6"[39m
      [36m>[39m
        [36m<h2[39m
          [33mclass[39m=[32m"text-2xl font-bold text-gray-900 mb-2"[39m
        [36m>[39m
          [0mCheck Your Eligibility[0m
        [36m</h2>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-gray-600"[39m
        [36m>[39m
          [0mWe'll check if you're eligible for compensation in less than 2 minutes[0m
        [36m</p>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"mb-6"[39m
      [36m>[39m
        [36m<label[39m
          [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-3"[39m
        [36m>[39m
          [0mWhat happened to your flight?[0m
        [36m</label>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 sm:grid-cols-2 gap-3"[39m
        [36m>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mchecked[39m=[32m""[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"delay"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mFlight Delayed[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mFlight departed late from scheduled time[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"cancellation"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mFlight Cancelled[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mFlight did not operate at all[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"denied_boarding"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mDenied Boarding[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mNot allowed to board despite valid ticket[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"downgrade"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mSeat Downgrade[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mPlaced in lower class than booked[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
            [33mfor[39m=[32m"departureDate"[39m
          [36m>[39m
            [0mDeparture Date[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
              [33mid[39m=[32m"departureDate"[39m
              [33mtype[39m=[32m"date"[39m
              [33mvalue[39m=[32m"2024-01-15"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
          [36m>[39m
            [0mWhen was your flight scheduled to depart?[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
            [33mfor[39m=[32m"flightNumber"[39m
          [36m>[39m
            [0mFlight Number[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
              [33mid[39m=[32m"flightNumber"[39m
              [33mplaceholder[39m=[32m"e.g., BA123"[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m"AA456"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
          [36m>[39m
            [0mFound on your boarding pass or confi...
[90m [2mâ¯[22m Object.getElementError node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2mâ¯[22m getAllByLabelText node_modules/@testing-library/dom/dist/queries/label-text.js:[2m111:38[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/dom/dist/query-helpers.js:[2m52:17[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2mâ¯[22m __tests__/integration/formSubmission.test.tsx:[2m375:29[22m[39m
    [90m373| [39m
    [90m374| [39m    [90m// Fill check-in time[39m
    [90m375| [39m    fireEvent.change(screen.getByLabelText(/What time did you check inâ€¦
    [90m   | [39m                            [31m^[39m
    [90m376| [39m
    [90m377| [39m    [90m// Fill ticket price[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[13/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m __tests__/integration/formSubmission.test.tsx[2m > [22mIntegration: Denied Boarding with Alternative Flight[2m > [22mshould handle round-trip ticket price correctly
[31m[1mTestingLibraryElementError[22m[39m: Unable to find a label with the text of: /What time did you check in/i

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<form[39m
      [33mclass[39m=[32m"space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"text-center mb-6"[39m
      [36m>[39m
        [36m<h2[39m
          [33mclass[39m=[32m"text-2xl font-bold text-gray-900 mb-2"[39m
        [36m>[39m
          [0mCheck Your Eligibility[0m
        [36m</h2>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-gray-600"[39m
        [36m>[39m
          [0mWe'll check if you're eligible for compensation in less than 2 minutes[0m
        [36m</p>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"mb-6"[39m
      [36m>[39m
        [36m<label[39m
          [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-3"[39m
        [36m>[39m
          [0mWhat happened to your flight?[0m
        [36m</label>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 sm:grid-cols-2 gap-3"[39m
        [36m>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mchecked[39m=[32m""[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"delay"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mFlight Delayed[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mFlight departed late from scheduled time[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"cancellation"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mFlight Cancelled[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mFlight did not operate at all[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"denied_boarding"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mDenied Boarding[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mNot allowed to board despite valid ticket[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"downgrade"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mSeat Downgrade[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mPlaced in lower class than booked[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
            [33mfor[39m=[32m"departureDate"[39m
          [36m>[39m
            [0mDeparture Date[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
              [33mid[39m=[32m"departureDate"[39m
              [33mtype[39m=[32m"date"[39m
              [33mvalue[39m=[32m"2024-01-15"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
          [36m>[39m
            [0mWhen was your flight scheduled to depart?[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
            [33mfor[39m=[32m"flightNumber"[39m
          [36m>[39m
            [0mFlight Number[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
              [33mid[39m=[32m"flightNumber"[39m
              [33mplaceholder[39m=[32m"e.g., BA123"[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m"AA456"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
          [36m>[39m
            [0mFound on your boarding pass or confi...
[90m [2mâ¯[22m Object.getElementError node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2mâ¯[22m getAllByLabelText node_modules/@testing-library/dom/dist/queries/label-text.js:[2m111:38[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/dom/dist/query-helpers.js:[2m52:17[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2mâ¯[22m __tests__/integration/formSubmission.test.tsx:[2m421:29[22m[39m
    [90m419| [39m    fireEvent[33m.[39m[34mclick[39m(screen[33m.[39m[34mgetByLabelText[39m([36m/involuntary/i[39m))[33m;[39m
    [90m420| [39m    fireEvent.change(screen.getByLabelText(/Reason for denied boardingâ€¦
    [90m421| [39m    fireEvent.change(screen.getByLabelText(/What time did you check inâ€¦
    [90m   | [39m                            [31m^[39m
    [90m422| [39m
    [90m423| [39m    [90m// Enter round-trip price[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[14/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m __tests__/integration/formSubmission.test.tsx[2m > [22mIntegration: Downgrade Claim with Live Preview[2m > [22mshould submit downgrade claim successfully
[31m[1mTestingLibraryElementError[22m[39m: Unable to find an element with the text: /Class Paid For/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<form[39m
      [33mclass[39m=[32m"space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"text-center mb-6"[39m
      [36m>[39m
        [36m<h2[39m
          [33mclass[39m=[32m"text-2xl font-bold text-gray-900 mb-2"[39m
        [36m>[39m
          [0mCheck Your Eligibility[0m
        [36m</h2>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-gray-600"[39m
        [36m>[39m
          [0mWe'll check if you're eligible for compensation in less than 2 minutes[0m
        [36m</p>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"mb-6"[39m
      [36m>[39m
        [36m<label[39m
          [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-3"[39m
        [36m>[39m
          [0mWhat happened to your flight?[0m
        [36m</label>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 sm:grid-cols-2 gap-3"[39m
        [36m>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mchecked[39m=[32m""[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"delay"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mFlight Delayed[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mFlight departed late from scheduled time[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"cancellation"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mFlight Cancelled[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mFlight did not operate at all[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"denied_boarding"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mDenied Boarding[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mNot allowed to board despite valid ticket[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"downgrade"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mSeat Downgrade[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mPlaced in lower class than booked[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
            [33mfor[39m=[32m"departureDate"[39m
          [36m>[39m
            [0mDeparture Date[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
              [33mid[39m=[32m"departureDate"[39m
              [33mtype[39m=[32m"date"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
          [36m>[39m
            [0mWhen was your flight scheduled to depart?[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
            [33mfor[39m=[32m"flightNumber"[39m
          [36m>[39m
            [0mFlight Number[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
              [33mid[39m=[32m"flightNumber"[39m
              [33mplaceholder[39m=[32m"e.g., BA123"[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
          [36m>[39m
            [0mFound on your boarding pass or confirmation email[...

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<form[39m
        [33mclass[39m=[32m"space-y-6"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"text-center mb-6"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-2xl font-bold text-gray-900 mb-2"[39m
          [36m>[39m
            [0mCheck Your Eligibility[0m
          [36m</h2>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600"[39m
          [36m>[39m
            [0mWe'll check if you're eligible for compensation in less than 2 minutes[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-6"[39m
        [36m>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-3"[39m
          [36m>[39m
            [0mWhat happened to your flight?[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 sm:grid-cols-2 gap-3"[39m
          [36m>[39m
            [36m<label[39m
              [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
            [36m>[39m
              [36m<input[39m
                [33mchecked[39m=[32m""[39m
                [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
                [33mname[39m=[32m"disruptionType"[39m
                [33mtype[39m=[32m"radio"[39m
                [33mvalue[39m=[32m"delay"[39m
              [36m/>[39m
              [36m<div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium"[39m
                [36m>[39m
                  [0mFlight Delayed[0m
                [36m</span>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                [36m>[39m
                  [0mFlight departed late from scheduled time[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</label>[39m
            [36m<label[39m
              [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
                [33mname[39m=[32m"disruptionType"[39m
                [33mtype[39m=[32m"radio"[39m
                [33mvalue[39m=[32m"cancellation"[39m
              [36m/>[39m
              [36m<div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium"[39m
                [36m>[39m
                  [0mFlight Cancelled[0m
                [36m</span>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                [36m>[39m
                  [0mFlight did not operate at all[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</label>[39m
            [36m<label[39m
              [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
                [33mname[39m=[32m"disruptionType"[39m
                [33mtype[39m=[32m"radio"[39m
                [33mvalue[39m=[32m"denied_boarding"[39m
              [36m/>[39m
              [36m<div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium"[39m
                [36m>[39m
                  [0mDenied Boarding[0m
                [36m</span>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                [36m>[39m
                  [0mNot allowed to board despite valid ticket[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</label>[39m
            [36m<label[39m
              [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
                [33mname[39m=[32m"disruptionType"[39m
                [33mtype[39m=[32m"radio"[39m
                [33mvalue[39m=[32m"downgrade"[39m
              [36m/>[39m
              [36m<div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium"[39m
                [36m>[39m
                  [0mSeat Downgrade[0m
                [36m</span>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                [36m>[39m
                  [0mPlaced in lower class than booked[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</label>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
              [33mfor[39m=[32m"departureDate"[39m
            [36m>[39m
              [0mDeparture Date[0m
            [36m</label>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
                [33mid[39m=[32m"departureDate"[39m
                [33mtype[39m=[32m"date"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<p[39m
              [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
            [36m>[39m
              [0mWhen was your flight scheduled to depart?[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
              [33mfor[39m=[32m"flightNumber"[39m
            [36m>[39m
              [0mFlight Number[0m
            [36m</label>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
                [33mid[39m=[32m"flightNumber"[39m
                [33mp...
[90m [2mâ¯[22m Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:[2m163:27[22m[39m
[36m [2mâ¯[22m __tests__/integration/formSubmission.test.tsx:[2m481:11[22m[39m
    [90m479| [39m
    [90m480| [39m    [90m// Wait for downgrade fields[39m
    [90m481| [39m    [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m   | [39m          [31m^[39m
    [90m482| [39m      [34mexpect[39m(screen[33m.[39m[34mgetByText[39m([36m/Class Paid For/i[39m))[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m483| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[15/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m __tests__/integration/formSubmission.test.tsx[2m > [22mIntegration: Error Handling[2m > [22mshould handle API errors gracefully
[31m[1mTestingLibraryElementError[22m[39m: Unable to find an element with the placeholder text of: 0

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<form[39m
      [33mclass[39m=[32m"space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"text-center mb-6"[39m
      [36m>[39m
        [36m<h2[39m
          [33mclass[39m=[32m"text-2xl font-bold text-gray-900 mb-2"[39m
        [36m>[39m
          [0mCheck Your Eligibility[0m
        [36m</h2>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-gray-600"[39m
        [36m>[39m
          [0mWe'll check if you're eligible for compensation in less than 2 minutes[0m
        [36m</p>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"mb-6"[39m
      [36m>[39m
        [36m<label[39m
          [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-3"[39m
        [36m>[39m
          [0mWhat happened to your flight?[0m
        [36m</label>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 sm:grid-cols-2 gap-3"[39m
        [36m>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mchecked[39m=[32m""[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"delay"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mFlight Delayed[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mFlight departed late from scheduled time[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"cancellation"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mFlight Cancelled[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mFlight did not operate at all[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"denied_boarding"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mDenied Boarding[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mNot allowed to board despite valid ticket[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"downgrade"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mSeat Downgrade[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mPlaced in lower class than booked[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
            [33mfor[39m=[32m"departureDate"[39m
          [36m>[39m
            [0mDeparture Date[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
              [33mid[39m=[32m"departureDate"[39m
              [33mtype[39m=[32m"date"[39m
              [33mvalue[39m=[32m"2024-01-15"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
          [36m>[39m
            [0mWhen was your flight scheduled to depart?[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
            [33mfor[39m=[32m"flightNumber"[39m
          [36m>[39m
            [0mFlight Number[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
              [33mid[39m=[32m"flightNumber"[39m
              [33mplaceholder[39m=[32m"e.g., BA123"[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m"BA123"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
          [36m>[39m
            [0mFound on your boarding pass or confi...

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<form[39m
      [33mclass[39m=[32m"space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"text-center mb-6"[39m
      [36m>[39m
        [36m<h2[39m
          [33mclass[39m=[32m"text-2xl font-bold text-gray-900 mb-2"[39m
        [36m>[39m
          [0mCheck Your Eligibility[0m
        [36m</h2>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-gray-600"[39m
        [36m>[39m
          [0mWe'll check if you're eligible for compensation in less than 2 minutes[0m
        [36m</p>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"mb-6"[39m
      [36m>[39m
        [36m<label[39m
          [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-3"[39m
        [36m>[39m
          [0mWhat happened to your flight?[0m
        [36m</label>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 sm:grid-cols-2 gap-3"[39m
        [36m>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mchecked[39m=[32m""[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"delay"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mFlight Delayed[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mFlight departed late from scheduled time[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"cancellation"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mFlight Cancelled[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mFlight did not operate at all[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"denied_boarding"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mDenied Boarding[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mNot allowed to board despite valid ticket[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
          [36m<label[39m
            [33mclass[39m=[32m"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mr-3 w-4 h-4 accent-blue-600"[39m
              [33mname[39m=[32m"disruptionType"[39m
              [33mtype[39m=[32m"radio"[39m
              [33mvalue[39m=[32m"downgrade"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-medium"[39m
              [36m>[39m
                [0mSeat Downgrade[0m
              [36m</span>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0mPlaced in lower class than booked[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</label>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
            [33mfor[39m=[32m"departureDate"[39m
          [36m>[39m
            [0mDeparture Date[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
              [33mid[39m=[32m"departureDate"[39m
              [33mtype[39m=[32m"date"[39m
              [33mvalue[39m=[32m"2024-01-15"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
          [36m>[39m
            [0mWhen was your flight scheduled to depart?[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div>[39m
          [36m<label[39m
            [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
            [33mfor[39m=[32m"flightNumber"[39m
          [36m>[39m
            [0mFlight Number[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-4 py-4 md:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base border-gray-300"[39m
              [33mid[39m=[32m"flightNumber"[39m
              [33mplaceholder[39m=[32m"e.g., BA123"[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m"BA123"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-1 text-xs text-gray-500"[39m
          [36m>[39m
            [0mFound on your boarding pass or confi...
[90m [2mâ¯[22m waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:[2m163:27[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/dom/dist/query-helpers.js:[2m86:33[22m[39m
[36m [2mâ¯[22m __tests__/integration/formSubmission.test.tsx:[2m555:33[22m[39m
    [90m553| [39m
    [90m554| [39m    [90m// Fill delay duration[39m
    [90m555| [39m    [35mconst[39m inputs [33m=[39m [35mawait[39m screen[33m.[39m[34mfindAllByPlaceholderText[39m([32m'0'[39m)[33m;[39m
    [90m   | [39m                                [31m^[39m
    [90m556| [39m    fireEvent[33m.[39m[34mchange[39m(inputs[[34m0[39m][33m,[39m { target[33m:[39m { value[33m:[39m [32m'4'[39m } })[33m;[39m
    [90m557| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[16/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/components/__tests__/ClaimSubmissionForm.test.tsx[2m > [22mClaimSubmissionForm[2m > [22mshould render the form with first step
[41m[1m FAIL [22m[49m src/components/__tests__/ClaimSubmissionForm.test.tsx[2m > [22mClaimSubmissionForm[2m > [22mshould show validation errors for empty required fields
[41m[1m FAIL [22m[49m src/components/__tests__/ClaimSubmissionForm.test.tsx[2m > [22mClaimSubmissionForm[2m > [22mshould validate email format
[41m[1m FAIL [22m[49m src/components/__tests__/ClaimSubmissionForm.test.tsx[2m > [22mClaimSubmissionForm[2m > [22mshould allow navigation to next step when valid
[41m[1m FAIL [22m[49m src/components/__tests__/ClaimSubmissionForm.test.tsx[2m > [22mClaimSubmissionForm[2m > [22mshould allow navigation back to previous step
[41m[1m FAIL [22m[49m src/components/__tests__/ClaimSubmissionForm.test.tsx[2m > [22mClaimSubmissionForm[2m > [22mshould persist form data in localStorage
[41m[1m FAIL [22m[49m src/components/__tests__/ClaimSubmissionForm.test.tsx[2m > [22mClaimSubmissionForm[2m > [22mshould show progress indicator
[41m[1m FAIL [22m[49m src/components/__tests__/ClaimSubmissionForm.test.tsx[2m > [22mClaimSubmissionForm[2m > [22mshould disable back button on first step
[41m[1m FAIL [22m[49m src/components/__tests__/ClaimSubmissionForm.test.tsx[2m > [22mForm Validation[2m > [22mshould validate required fields for step 2
[41m[1m FAIL [22m[49m src/components/__tests__/ClaimSubmissionForm.test.tsx[2m > [22mForm Validation[2m > [22mshould clear errors when user starts typing
[31m[1mError[22m: useCurrency must be used within a CurrencyProvider[39m
[36m [2mâ¯[22m useCurrency src/contexts/CurrencyContext.tsx:[2m115:11[22m[39m
    [90m113| [39m  [35mconst[39m context [33m=[39m [34museContext[39m([33mCurrencyContext[39m)[33m;[39m
    [90m114| [39m  [35mif[39m (context [33m===[39m undefined) {
    [90m115| [39m    throw new Error('useCurrency must be used within a CurrencyProvideâ€¦
    [90m   | [39m          [31m^[39m
    [90m116| [39m  }
    [90m117| [39m  [35mreturn[39m context[33m;[39m
[90m [2mâ¯[22m ClaimSubmissionForm src/components/ClaimSubmissionForm.tsx:[2m83:24[22m[39m
[90m [2mâ¯[22m Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:[2m25904:20[22m[39m
[90m [2mâ¯[22m renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:[2m7662:22[22m[39m
[90m [2mâ¯[22m updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:[2m10166:19[22m[39m
[90m [2mâ¯[22m beginWork node_modules/react-dom/cjs/react-dom-client.development.js:[2m11778:18[22m[39m
[90m [2mâ¯[22m runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:[2m874:13[22m[39m
[90m [2mâ¯[22m performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:[2m17641:22[22m[39m
[90m [2mâ¯[22m workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:[2m17469:41[22m[39m
[90m [2mâ¯[22m renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:[2m17450:11[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[17/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/cancellation.test.ts[2m > [22mEnhanced Cancellation Support - EU261 Article 5 Compliance[2m > [22mUK CAA Regulation Compatibility[2m > [22mshould apply UK CAA regulations for UK flights
[31m[1mAssertionError[22m: expected 'EU261' to be 'UK CAA' // Object.is equality[39m

Expected: [32m"UK CAA"[39m
Received: [31m"EU261"[39m

[36m [2mâ¯[22m src/lib/__tests__/cancellation.test.ts:[2m402:33[22m[39m
    [90m400| [39m      [35mconst[39m result [33m=[39m [35mawait[39m [34mcheckEligibility[39m(flight)[33m;[39m
    [90m401| [39m
    [90m402| [39m      [34mexpect[39m(result[33m.[39mregulation)[33m.[39m[34mtoBe[39m([32m'UK CAA'[39m)[33m;[39m
    [90m   | [39m                                [31m^[39m
    [90m403| [39m      [34mexpect[39m(result[33m.[39meligible)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m404| [39m      [90m// UK uses GBP currency[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[18/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/cancellation.test.ts[2m > [22mIntegration Tests - End-to-End Cancellation Scenarios[2m > [22mshould handle realistic cancellation scenario: Last-minute cancellation with no alternative
[41m[1m FAIL [22m[49m src/lib/__tests__/cancellation.test.ts[2m > [22mIntegration Tests - End-to-End Cancellation Scenarios[2m > [22mshould handle realistic cancellation scenario: Early cancellation with good alternative
[31m[1mError[22m: Cannot find module '../extraordinary-circumstances'
Require stack:
- /Users/connorowens/Desktop/flghtly/src/lib/__tests__/cancellation.test.ts[39m
[36m [2mâ¯[22m src/lib/__tests__/cancellation.test.ts:[2m524:51[22m[39m
    [90m522| [39m    [90m// Reset mocks to default behavior[39m
    [90m523| [39m    [90m// eslint-disable-next-line @typescript-eslint/no-require-imports[39m
    [90m524| [39m    const { analyzeExtraordinaryCircumstances } = require('../extraordâ€¦
    [90m   | [39m                                                  [31m^[39m
    [90m525| [39m    vi[33m.[39m[34mmocked[39m(analyzeExtraordinaryCircumstances)[33m.[39m[34mmockResolvedValue[39m({
    [90m526| [39m      isExtraordinary[33m:[39m [35mfalse[39m[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[19/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/claim-filing-service.test.ts[2m > [22mClaim Filing Service[2m > [22mgetClaimFilingStats[2m > [22mshould return filing statistics
[31m[1mAssertionError[22m: expected undefined to be 76 // Object.is equality[39m

[32m- Expected:[39m 
76

[31m+ Received:[39m 
undefined

[36m [2mâ¯[22m src/lib/__tests__/claim-filing-service.test.ts:[2m453:33[22m[39m
    [90m451| [39m      [35mconst[39m stats [33m=[39m [35mawait[39m [34mgetClaimFilingStats[39m()[33m;[39m
    [90m452| [39m
    [90m453| [39m      [34mexpect[39m(stats[33m.[39mtotalClaims)[33m.[39m[34mtoBe[39m([34m76[39m)[33m;[39m
    [90m   | [39m                                [31m^[39m
    [90m454| [39m      [34mexpect[39m(stats[33m.[39mreadyToFile)[33m.[39m[34mtoBe[39m([34m1[39m)[33m;[39m
    [90m455| [39m      [34mexpect[39m(stats[33m.[39mfiled)[33m.[39m[34mtoBe[39m([34m10[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[20/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/claim-filing-service.test.ts[2m > [22mClaim Filing Service[2m > [22mgetClaimsByStatus[2m > [22mshould return claims by status
[31m[1mAssertionError[22m: expected 'rec123' to be 'rec1' // Object.is equality[39m

Expected: [32m"rec1"[39m
Received: [31m"rec1[7m23[27m"[39m

[36m [2mâ¯[22m src/lib/__tests__/claim-filing-service.test.ts:[2m476:28[22m[39m
    [90m474| [39m
    [90m475| [39m      [34mexpect[39m(claims)[33m.[39m[34mtoHaveLength[39m([34m2[39m)[33m;[39m
    [90m476| [39m      [34mexpect[39m(claims[[34m0[39m][33m.[39mid)[33m.[39m[34mtoBe[39m([32m'rec1'[39m)[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m477| [39m      [34mexpect[39m(claims[[34m0[39m][33m.[39mstatus)[33m.[39m[34mtoBe[39m([32m'ready_to_file'[39m)[33m;[39m
    [90m478| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[21/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/downgrading.test.ts[2m > [22mSeat Downgrading - EU261 Article 10 Compliance[2m > [22mEU261 Downgrading Compensation - Distance Tiers[2m > [22mshould calculate 50% refund for medium-haul flights (1500-3500km)
[31m[1mAssertionError[22m: expected 'Â£500' to be 'â‚¬500' // Object.is equality[39m

Expected: [32m"[7mâ‚¬[27m500"[39m
Received: [31m"[7mÂ£[27m500"[39m

[36m [2mâ¯[22m src/lib/__tests__/downgrading.test.ts:[2m100:29[22m[39m
    [90m 98| [39m
    [90m 99| [39m      [34mexpect[39m(result[33m.[39meligible)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m100| [39m      [34mexpect[39m(result[33m.[39mamount)[33m.[39m[34mtoBe[39m([32m'â‚¬500'[39m)[33m;[39m [90m// 50% of 1000[39m
    [90m   | [39m                            [31m^[39m
    [90m101| [39m      [34mexpect[39m(result[33m.[39mconfidence)[33m.[39m[34mtoBe[39m([34m95[39m)[33m;[39m
    [90m102| [39m      [34mexpect[39m(result[33m.[39mregulation)[33m.[39m[34mtoBe[39m([32m'EU261'[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[22/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/downgrading.test.ts[2m > [22mSeat Downgrading - EU261 Article 10 Compliance[2m > [22mEU261 Downgrading - All Class Combinations[2m > [22mshould handle First to Premium Economy downgrade
[31m[1mAssertionError[22m: expected 'Â£1875' to be 'â‚¬1875' // Object.is equality[39m

Expected: [32m"[7mâ‚¬[27m1875"[39m
Received: [31m"[7mÂ£[27m1875"[39m

[36m [2mâ¯[22m src/lib/__tests__/downgrading.test.ts:[2m171:29[22m[39m
    [90m169| [39m
    [90m170| [39m      [34mexpect[39m(result[33m.[39meligible)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m171| [39m      [34mexpect[39m(result[33m.[39mamount)[33m.[39m[34mtoBe[39m([32m'â‚¬1875'[39m)[33m;[39m [90m// 75% of 2500[39m
    [90m   | [39m                            [31m^[39m
    [90m172| [39m      expect(result.reason).toContain('Downgraded from first to premiuâ€¦
    [90m173| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[23/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/downgrading.test.ts[2m > [22mSeat Downgrading - EU261 Article 10 Compliance[2m > [22mEU261 Downgrading - No Downgrade Scenarios[2m > [22mshould not be eligible for upgrades
[31m[1mAssertionError[22m: expected 'Â£0' to be 'â‚¬0' // Object.is equality[39m

Expected: [32m"[7mâ‚¬[27m0"[39m
Received: [31m"[7mÂ£[27m0"[39m

[36m [2mâ¯[22m src/lib/__tests__/downgrading.test.ts:[2m349:29[22m[39m
    [90m347| [39m
    [90m348| [39m      [34mexpect[39m(result[33m.[39meligible)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m349| [39m      [34mexpect[39m(result[33m.[39mamount)[33m.[39m[34mtoBe[39m([32m'â‚¬0'[39m)[33m;[39m
    [90m   | [39m                            [31m^[39m
    [90m350| [39m      [34mexpect[39m(result[33m.[39mmessage)[33m.[39m[34mtoContain[39m([32m'No downgrade detected'[39m)[33m;[39m
    [90m351| [39m      [34mexpect[39m(result[33m.[39mreason)[33m.[39m[34mtoBe[39m([32m'No downgrade occurred'[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[24/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/downgrading.test.ts[2m > [22mSeat Downgrading - EU261 Article 10 Compliance[2m > [22mEU261 Downgrading - Missing Class Information[2m > [22mshould not be eligible when actualClass is missing
[31m[1mAssertionError[22m: expected 'Â£0' to be 'â‚¬0' // Object.is equality[39m

Expected: [32m"[7mâ‚¬[27m0"[39m
Received: [31m"[7mÂ£[27m0"[39m

[36m [2mâ¯[22m src/lib/__tests__/downgrading.test.ts:[2m396:29[22m[39m
    [90m394| [39m
    [90m395| [39m      [34mexpect[39m(result[33m.[39meligible)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m396| [39m      [34mexpect[39m(result[33m.[39mamount)[33m.[39m[34mtoBe[39m([32m'â‚¬0'[39m)[33m;[39m
    [90m   | [39m                            [31m^[39m
    [90m397| [39m      expect(result.message).toContain('missing booked or actual classâ€¦
    [90m398| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[25/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/downgrading.test.ts[2m > [22mSeat Downgrading - EU261 Article 10 Compliance[2m > [22mEU261 Downgrading - Compensation Cap at Ticket Price[2m > [22mshould cap compensation at ticket price for very cheap tickets
[31m[1mAssertionError[22m: expected 'Â£38' to be 'â‚¬38' // Object.is equality[39m

Expected: [32m"[7mâ‚¬[27m38"[39m
Received: [31m"[7mÂ£[27m38"[39m

[36m [2mâ¯[22m src/lib/__tests__/downgrading.test.ts:[2m420:29[22m[39m
    [90m418| [39m      [34mexpect[39m(result[33m.[39meligible)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m419| [39m      [90m// 75% of 50 = 37.5, rounds to 38, but should be capped at 50[39m
    [90m420| [39m      [34mexpect[39m(result[33m.[39mamount)[33m.[39m[34mtoBe[39m([32m'â‚¬38'[39m)[33m;[39m [90m// Rounded 75% of 50[39m
    [90m   | [39m                            [31m^[39m
    [90m421| [39m      [34mexpect[39m(result[33m.[39mconfidence)[33m.[39m[34mtoBe[39m([34m95[39m)[33m;[39m
    [90m422| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[26/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/downgrading.test.ts[2m > [22mSeat Downgrading - EU261 Article 10 Compliance[2m > [22mEU261 Downgrading - No Extraordinary Circumstances Exemption[2m > [22mshould be eligible even with technical issues
[31m[1mAssertionError[22m: expected 'Â£1500' to be 'â‚¬1500' // Object.is equality[39m

Expected: [32m"[7mâ‚¬[27m1500"[39m
Received: [31m"[7mÂ£[27m1500"[39m

[36m [2mâ¯[22m src/lib/__tests__/downgrading.test.ts:[2m468:29[22m[39m
    [90m466| [39m
    [90m467| [39m      [34mexpect[39m(result[33m.[39meligible)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m468| [39m      [34mexpect[39m(result[33m.[39mamount)[33m.[39m[34mtoBe[39m([32m'â‚¬1500'[39m)[33m;[39m [90m// 75% of 2000[39m
    [90m   | [39m                            [31m^[39m
    [90m469| [39m    })[33m;[39m
    [90m470| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[27/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/downgrading.test.ts[2m > [22mEdge Cases and Boundary Conditions[2m > [22mshould handle exact 1500km boundary (short-haul tier)
[31m[1mAssertionError[22m: expected 'You\'re entitled to â‚¬500 (50% of tickâ€¦' to contain '30%'[39m

Expected: [32m"30%"[39m
Received: [31m"You're entitled to â‚¬500 (50% of ticket price) under EU261 Article 10 for seat downgrading"[39m

[36m [2mâ¯[22m src/lib/__tests__/downgrading.test.ts:[2m630:28[22m[39m
    [90m628| [39m    [34mexpect[39m(result[33m.[39meligible)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m629| [39m    [90m// At 1500km should be 30%[39m
    [90m630| [39m    [34mexpect[39m(result[33m.[39mmessage)[33m.[39m[34mtoContain[39m([32m'30%'[39m)[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m631| [39m  })[33m;[39m
    [90m632| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[28/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/downgrading.test.ts[2m > [22mEdge Cases and Boundary Conditions[2m > [22mshould round compensation amounts correctly
[31m[1mAssertionError[22m: expected 'Â£100' to be 'â‚¬100' // Object.is equality[39m

Expected: [32m"[7mâ‚¬[27m100"[39m
Received: [31m"[7mÂ£[27m100"[39m

[36m [2mâ¯[22m src/lib/__tests__/downgrading.test.ts:[2m671:27[22m[39m
    [90m669| [39m
    [90m670| [39m    [34mexpect[39m(result[33m.[39meligible)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m671| [39m    [34mexpect[39m(result[33m.[39mamount)[33m.[39m[34mtoBe[39m([32m'â‚¬100'[39m)[33m;[39m [90m// Should round to 100[39m
    [90m   | [39m                          [31m^[39m
    [90m672| [39m  })[33m;[39m
    [90m673| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[29/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/phase2-integration.test.ts[2m > [22mPhase 2 Integration Tests[2m > [22mComplete Scenario Detection Pipeline[2m > [22mshould process complex cancellation scenario with EU261 compensation
[31m[1mAssertionError[22m: expected [ â€¦(2) ] to include 'Right to care (meals, refreshments, aâ€¦'[39m
[36m [2mâ¯[22m src/lib/__tests__/phase2-integration.test.ts:[2m66:58[22m[39m
    [90m 64| [39m
    [90m 65| [39m      [90m// Verify additional rights[39m
    [90m 66| [39m      [34mexpect[39m(result[33m.[39mcompensationResult[33m.[39madditionalRights)[33m.[39m[34mtoContain[39m(
    [90m   | [39m                                                         [31m^[39m
    [90m 67| [39m        [32m'Right to care (meals, refreshments, accommodation)'[39m
    [90m 68| [39m      )[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[30/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/phase2-integration.test.ts[2m > [22mPhase 2 Integration Tests[2m > [22mComplete Scenario Detection Pipeline[2m > [22mshould process denied boarding scenario with US DOT compensation
[31m[1mAssertionError[22m: expected 'other' to be 'overbooking' // Object.is equality[39m

Expected: [32m"o[7mverbooking[27m"[39m
Received: [31m"o[7mther[27m"[39m

[36m [2mâ¯[22m src/lib/__tests__/phase2-integration.test.ts:[2m122:70[22m[39m
    [90m120| [39m        [32m'involuntary'[39m
    [90m121| [39m      )[33m;[39m
    [90m122| [39m      expect(result.scenarioResult.scenarios.deniedBoarding?.reason).tâ€¦
    [90m   | [39m                                                                     [31m^[39m
    [90m123| [39m        [32m'overbooking'[39m
    [90m124| [39m      )[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[31/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/phase2-integration.test.ts[2m > [22mPhase 2 Integration Tests[2m > [22mComplete Scenario Detection Pipeline[2m > [22mshould process downgrade scenario with fare difference compensation
[31m[1mAssertionError[22m: expected undefined to be 1200 // Object.is equality[39m

[32m- Expected:[39m 
1200

[31m+ Received:[39m 
undefined

[36m [2mâ¯[22m src/lib/__tests__/phase2-integration.test.ts:[2m182:73[22m[39m
    [90m180| [39m        [32m'economy'[39m
    [90m181| [39m      )[33m;[39m
    [90m182| [39m      expect(result.scenarioResult.scenarios.downgrade?.fareDifferenceâ€¦
    [90m   | [39m                                                                        [31m^[39m
    [90m183| [39m        [34m1200[39m
    [90m184| [39m      )[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[32/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/phase2-integration.test.ts[2m > [22mPhase 2 Integration Tests[2m > [22mComplete Scenario Detection Pipeline[2m > [22mshould process multiple scenarios and prioritize primary
[31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
[36m [2mâ¯[22m src/lib/__tests__/phase2-integration.test.ts:[2m296:59[22m[39m
    [90m294| [39m
    [90m295| [39m      [90m// Verify combined compensation[39m
    [90m296| [39m      expect(result.compensationResult.totalCompensation).toBeGreaterTâ€¦
    [90m   | [39m                                                          [31m^[39m
    [90m297| [39m      expect(result.compensationResult.additionalRights.length).toBeGrâ€¦
    [90m298| [39m        [34m0[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[33/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/real-time-integration.test.ts[2m > [22mFlight Status Integration[2m > [22mFlightStatusManager[2m > [22mshould return flight status from primary provider
[31m[1mTypeError[22m: flightStatusManager.getFlightStatus is not a function[39m
[36m [2mâ¯[22m src/lib/__tests__/real-time-integration.test.ts:[2m78:48[22m[39m
    [90m 76| [39m      mockProvider[33m.[39mgetFlightStatus[33m.[39m[34mmockResolvedValue[39m(mockStatus)[33m;[39m
    [90m 77| [39m
    [90m 78| [39m      [35mconst[39m result [33m=[39m [35mawait[39m flightStatusManager[33m.[39m[34mgetFlightStatus[39m(
    [90m   | [39m                                               [31m^[39m
    [90m 79| [39m        [32m'BA123'[39m[33m,[39m
    [90m 80| [39m        [35mnew[39m [33mDate[39m([32m'2024-01-01'[39m)

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[34/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/real-time-integration.test.ts[2m > [22mFlight Status Integration[2m > [22mFlightStatusManager[2m > [22mshould fallback to secondary provider when primary fails
[31m[1mTypeError[22m: service.getFlightStatus is not a function[39m
[36m [2mâ¯[22m src/lib/__tests__/real-time-integration.test.ts:[2m120:36[22m[39m
    [90m118| [39m      secondaryProvider[33m.[39mgetFlightStatus[33m.[39m[34mmockResolvedValue[39m(mockStatus)[33m;[39m
    [90m119| [39m
    [90m120| [39m      [35mconst[39m result [33m=[39m [35mawait[39m service[33m.[39m[34mgetFlightStatus[39m(
    [90m   | [39m                                   [31m^[39m
    [90m121| [39m        [32m'BA123'[39m[33m,[39m
    [90m122| [39m        [35mnew[39m [33mDate[39m([32m'2024-01-01'[39m)

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[35/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/real-time-integration.test.ts[2m > [22mFlight Status Integration[2m > [22mFlightStatusManager[2m > [22mshould validate flight exists correctly
[31m[1mTypeError[22m: flightStatusManager.validateFlightExists is not a function[39m
[36m [2mâ¯[22m src/lib/__tests__/real-time-integration.test.ts:[2m146:48[22m[39m
    [90m144| [39m      mockProvider[33m.[39mgetFlightStatus[33m.[39m[34mmockResolvedValue[39m(mockStatus)[33m;[39m
    [90m145| [39m
    [90m146| [39m      [35mconst[39m exists [33m=[39m [35mawait[39m flightStatusManager[33m.[39m[34mvalidateFlightExists[39m(
    [90m   | [39m                                               [31m^[39m
    [90m147| [39m        [32m'BA123'[39m[33m,[39m
    [90m148| [39m        [35mnew[39m [33mDate[39m([32m'2024-01-01'[39m)

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[36/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/real-time-integration.test.ts[2m > [22mFlight Status Integration[2m > [22mFlightStatusManager[2m > [22mshould return false when flight does not exist
[31m[1mTypeError[22m: flightStatusManager.validateFlightExists is not a function[39m
[36m [2mâ¯[22m src/lib/__tests__/real-time-integration.test.ts:[2m159:48[22m[39m
    [90m157| [39m      )[33m;[39m
    [90m158| [39m
    [90m159| [39m      [35mconst[39m exists [33m=[39m [35mawait[39m flightStatusManager[33m.[39m[34mvalidateFlightExists[39m(
    [90m   | [39m                                               [31m^[39m
    [90m160| [39m        [32m'INVALID'[39m[33m,[39m
    [90m161| [39m        [35mnew[39m [33mDate[39m([32m'2024-01-01'[39m)

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[37/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/real-time-integration.test.ts[2m > [22mFlight Status Integration[2m > [22mFlight Status Providers[2m > [22mshould transform FlightRadar24 data correctly
[31m[1mTypeError[22m: __vite_ssr_import_3__.FlightRadar24Provider is not a constructor[39m
[36m [2mâ¯[22m src/lib/__tests__/real-time-integration.test.ts:[2m170:24[22m[39m
    [90m168| [39m  [34mdescribe[39m([32m'Flight Status Providers'[39m[33m,[39m () [33m=>[39m {
    [90m169| [39m    [34mit[39m([32m'should transform FlightRadar24 data correctly'[39m[33m,[39m () [33m=>[39m {
    [90m170| [39m      [35mconst[39m provider [33m=[39m [35mnew[39m [33mFlightRadar24Provider[39m([32m'test-key'[39m)[33m;[39m
    [90m   | [39m                       [31m^[39m
    [90m171| [39m      [35mconst[39m mockData [33m=[39m {
    [90m172| [39m        identification[33m:[39m { number[33m:[39m [32m'BA123'[39m }[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[38/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/real-time-integration.test.ts[2m > [22mFlight Status Integration[2m > [22mFlight Status Providers[2m > [22mshould transform AviationStack data correctly
[31m[1mTypeError[22m: __vite_ssr_import_3__.AviationStackProvider is not a constructor[39m
[36m [2mâ¯[22m src/lib/__tests__/real-time-integration.test.ts:[2m199:24[22m[39m
    [90m197| [39m
    [90m198| [39m    [34mit[39m([32m'should transform AviationStack data correctly'[39m[33m,[39m () [33m=>[39m {
    [90m199| [39m      [35mconst[39m provider [33m=[39m [35mnew[39m [33mAviationStackProvider[39m([32m'test-key'[39m)[33m;[39m
    [90m   | [39m                       [31m^[39m
    [90m200| [39m      [35mconst[39m mockData [33m=[39m {
    [90m201| [39m        flight[33m:[39m { iata[33m:[39m [32m'BA123'[39m }[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/real-time-integration.test.ts[2m > [22mEnhanced Claim Processing Integration[2m > [22mshould process claim with real-time verification
[31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- true[39m
[31m+ false[39m

[36m [2mâ¯[22m src/lib/__tests__/real-time-integration.test.ts:[2m680:42[22m[39m
    [90m678| [39m    const result = await claimProcessingService.processClaim(mockEmailâ€¦
    [90m679| [39m
    [90m680| [39m    [34mexpect[39m(result[33m.[39mparsedData[33m.[39misVerified)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m   | [39m                                         [31m^[39m
    [90m681| [39m    [34mexpect[39m(result[33m.[39mparsedData[33m.[39mverifiedDelay)[33m.[39m[34mtoBe[39m([34m120[39m)[33m;[39m
    [90m682| [39m    expect(result.parsedData.weatherContext?.isWeatherRelated).toBe(trâ€¦

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[40/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/scenario-detection.test.ts[2m > [22mScenario Detection System[2m > [22mDelay Detection[2m > [22mshould detect extraordinary circumstances
[31m[1mAssertionError[22m: expected undefined to be true // Object.is equality[39m

[32m- Expected:[39m 
true

[31m+ Received:[39m 
undefined

[36m [2mâ¯[22m src/lib/__tests__/scenario-detection.test.ts:[2m60:9[22m[39m
    [90m 58| [39m      [34mexpect[39m(
    [90m 59| [39m        result.scenarioResult.scenarios.delay?.extraordinaryCircumstanâ€¦
    [90m 60| [39m      )[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m   | [39m        [31m^[39m
    [90m 61| [39m      [34mexpect[39m(result[33m.[39mcompensationResult[33m.[39mtotalCompensation)[33m.[39m[34mtoBe[39m([34m0[39m)[33m;[39m
    [90m 62| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[41/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/scenario-detection.test.ts[2m > [22mScenario Detection System[2m > [22mDelay Detection[2m > [22mshould not compensate for delays under 3 hours
[31m[1mAssertionError[22m: expected 125 to be +0 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 0[39m
[31m+ 125[39m

[36m [2mâ¯[22m src/lib/__tests__/scenario-detection.test.ts:[2m78:59[22m[39m
    [90m 76| [39m
    [90m 77| [39m      expect(result.scenarioResult.scenarios.delay?.delayMinutes).toBeâ€¦
    [90m 78| [39m      [34mexpect[39m(result[33m.[39mcompensationResult[33m.[39mtotalCompensation)[33m.[39m[34mtoBe[39m([34m0[39m)[33m;[39m
    [90m   | [39m                                                          [31m^[39m
    [90m 79| [39m    })[33m;[39m
    [90m 80| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[42/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/scenario-detection.test.ts[2m > [22mScenario Detection System[2m > [22mCancellation Detection[2m > [22mshould detect cancellation with adequate notice
[31m[1mAssertionError[22m: expected undefined to be 'adequate' // Object.is equality[39m

[32m- Expected:[39m 
"adequate"

[31m+ Received:[39m 
undefined

[36m [2mâ¯[22m src/lib/__tests__/scenario-detection.test.ts:[2m121:74[22m[39m
    [90m119| [39m      )[33m;[39m
    [90m120| [39m
    [90m121| [39m      expect(result.scenarioResult.scenarios.cancellation?.noticePerioâ€¦
    [90m   | [39m                                                                         [31m^[39m
    [90m122| [39m        [32m'adequate'[39m
    [90m123| [39m      )[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[43/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/scenario-detection.test.ts[2m > [22mScenario Detection System[2m > [22mDenied Boarding Detection[2m > [22mshould detect involuntary denied boarding
[31m[1mAssertionError[22m: expected 'other' to be 'overbooking' // Object.is equality[39m

Expected: [32m"o[7mverbooking[27m"[39m
Received: [31m"o[7mther[27m"[39m

[36m [2mâ¯[22m src/lib/__tests__/scenario-detection.test.ts:[2m169:70[22m[39m
    [90m167| [39m        [32m'involuntary'[39m
    [90m168| [39m      )[33m;[39m
    [90m169| [39m      expect(result.scenarioResult.scenarios.deniedBoarding?.reason).tâ€¦
    [90m   | [39m                                                                     [31m^[39m
    [90m170| [39m        [32m'overbooking'[39m
    [90m171| [39m      )[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[44/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/scenario-detection.test.ts[2m > [22mScenario Detection System[2m > [22mDenied Boarding Detection[2m > [22mshould detect voluntary denied boarding
[31m[1mAssertionError[22m: expected undefined to be 'voluntary' // Object.is equality[39m

[32m- Expected:[39m 
"voluntary"

[31m+ Received:[39m 
undefined

[36m [2mâ¯[22m src/lib/__tests__/scenario-detection.test.ts:[2m188:68[22m[39m
    [90m186| [39m      )[33m;[39m
    [90m187| [39m
    [90m188| [39m      expect(result.scenarioResult.scenarios.deniedBoarding?.type).toBâ€¦
    [90m   | [39m                                                                   [31m^[39m
    [90m189| [39m        [32m'voluntary'[39m
    [90m190| [39m      )[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[45/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/scenario-detection.test.ts[2m > [22mScenario Detection System[2m > [22mDowngrade Detection[2m > [22mshould detect cabin downgrade
[31m[1mAssertionError[22m: expected undefined to be defined[39m
[36m [2mâ¯[22m src/lib/__tests__/scenario-detection.test.ts:[2m234:57[22m[39m
    [90m232| [39m      )[33m;[39m
    [90m233| [39m
    [90m234| [39m      [34mexpect[39m(result[33m.[39mscenarioResult[33m.[39mscenarios[33m.[39mdowngrade)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m   | [39m                                                        [31m^[39m
    [90m235| [39m      expect(result.scenarioResult.scenarios.downgrade?.isDowngrade).tâ€¦
    [90m236| [39m      expect(result.scenarioResult.scenarios.downgrade?.originalClass)â€¦

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[46/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/scenario-detection.test.ts[2m > [22mScenario Detection System[2m > [22mDowngrade Detection[2m > [22mshould detect premium economy to economy downgrade
[31m[1mAssertionError[22m: expected undefined to be 'premium_economy' // Object.is equality[39m

[32m- Expected:[39m 
"premium_economy"

[31m+ Received:[39m 
undefined

[36m [2mâ¯[22m src/lib/__tests__/scenario-detection.test.ts:[2m282:72[22m[39m
    [90m280| [39m      )[33m;[39m
    [90m281| [39m
    [90m282| [39m      expect(result.scenarioResult.scenarios.downgrade?.originalClass)â€¦
    [90m   | [39m                                                                       [31m^[39m
    [90m283| [39m        [32m'premium_economy'[39m
    [90m284| [39m      )[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[47/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/scenario-detection.test.ts[2m > [22mScenario Detection System[2m > [22mRegulation-Specific Compensation[2m > [22mshould calculate US DOT compensation correctly
[31m[1mAssertionError[22m: expected 'EUR' to be 'USD' // Object.is equality[39m

Expected: [32m"USD"[39m
Received: [31m"EUR"[39m

[36m [2mâ¯[22m src/lib/__tests__/scenario-detection.test.ts:[2m380:50[22m[39m
    [90m378| [39m
    [90m379| [39m      [34mexpect[39m(result[33m.[39mcompensationResult[33m.[39mregulation)[33m.[39m[34mtoBe[39m([32m'US_DOT'[39m)[33m;[39m
    [90m380| [39m      [34mexpect[39m(result[33m.[39mcompensationResult[33m.[39mcurrency)[33m.[39m[34mtoBe[39m([32m'USD'[39m)[33m;[39m
    [90m   | [39m                                                 [31m^[39m
    [90m381| [39m      expect(result.compensationResult.totalCompensation).toBeGreaterTâ€¦
    [90m382| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[48/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/__tests__/scenario-detection.test.ts[2m > [22mScenario Detection System[2m > [22mConfidence Scoring[2m > [22mshould have higher confidence for clear scenario descriptions
[31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
[36m [2mâ¯[22m src/lib/__tests__/scenario-detection.test.ts:[2m484:53[22m[39m
    [90m482| [39m      )[33m;[39m
    [90m483| [39m
    [90m484| [39m      [34mexpect[39m(clearResult[33m.[39mscenarioResult[33m.[39mconfidence)[33m.[39m[34mtoBeGreaterThan[39m(
    [90m   | [39m                                                    [31m^[39m
    [90m485| [39m        ambiguousResult[33m.[39mscenarioResult[33m.[39mconfidence
    [90m486| [39m      )[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[49/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/app/api/__tests__/admin-api.test.ts[2m > [22mAdmin API Integration Tests[2m > [22mGET /api/admin/claims[2m > [22mshould filter by airline
[31m[1mAssertionError[22m: expected [ { id: 'rec123', â€¦(14) }, â€¦(10) ] to have a length of 1 but got 11[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 1[39m
[31m+ 11[39m

[36m [2mâ¯[22m src/app/api/__tests__/admin-api.test.ts:[2m123:32[22m[39m
    [90m121| [39m
    [90m122| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
    [90m123| [39m      [34mexpect[39m(data[33m.[39mdata[33m.[39mclaims)[33m.[39m[34mtoHaveLength[39m([34m1[39m)[33m;[39m
    [90m   | [39m                               [31m^[39m
    [90m124| [39m      [34mexpect[39m(data[33m.[39mdata[33m.[39mclaims[[34m0[39m][33m.[39mairline)[33m.[39m[34mtoBe[39m([32m'British Airways'[39m)[33m;[39m
    [90m125| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[50/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/app/api/__tests__/admin-api.test.ts[2m > [22mAdmin API Integration Tests[2m > [22mGET /api/admin/claims[2m > [22mshould handle pagination
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'limit')[39m
[36m [2mâ¯[22m src/app/api/__tests__/admin-api.test.ts:[2m151:35[22m[39m
    [90m149| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
    [90m150| [39m      [34mexpect[39m(data[33m.[39mdata[33m.[39mclaims)[33m.[39m[34mtoHaveLength[39m([34m10[39m)[33m;[39m
    [90m151| [39m      [34mexpect[39m(data[33m.[39mdata[33m.[39mpagination[33m.[39mlimit)[33m.[39m[34mtoBe[39m([34m10[39m)[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m152| [39m      [34mexpect[39m(data[33m.[39mdata[33m.[39mpagination[33m.[39moffset)[33m.[39m[34mtoBe[39m([34m0[39m)[33m;[39m
    [90m153| [39m      [34mexpect[39m(data[33m.[39mdata[33m.[39mpagination[33m.[39mhasMore)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[51/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/app/api/__tests__/admin-api.test.ts[2m > [22mAdmin API Integration Tests[2m > [22mGET /api/admin/claims[2m > [22mshould handle errors gracefully
[31m[1mAssertionError[22m: expected undefined to be false // Object.is equality[39m

[32m- Expected:[39m 
false

[31m+ Received:[39m 
undefined

[36m [2mâ¯[22m src/app/api/__tests__/admin-api.test.ts:[2m169:28[22m[39m
    [90m167| [39m
    [90m168| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m500[39m)[33m;[39m
    [90m169| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m170| [39m      [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoContain[39m([32m'Error fetching claims'[39m)[33m;[39m
    [90m171| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[52/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/app/api/__tests__/admin-api.test.ts[2m > [22mAdmin API Integration Tests[2m > [22mGET /api/admin/claims/ready-to-file[2m > [22mshould return claims ready to file
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2mâ¯[22m src/app/api/__tests__/admin-api.test.ts:[2m189:31[22m[39m
    [90m187| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m188| [39m
    [90m189| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m190| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m191| [39m      [34mexpect[39m(data[33m.[39mdata[33m.[39mclaims)[33m.[39m[34mtoHaveLength[39m([34m1[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[53/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/app/api/__tests__/admin-api.test.ts[2m > [22mAdmin API Integration Tests[2m > [22mGET /api/admin/claims/stats[2m > [22mshould return claim filing statistics
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2mâ¯[22m src/app/api/__tests__/admin-api.test.ts:[2m220:31[22m[39m
    [90m218| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m219| [39m
    [90m220| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m221| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m222| [39m      [34mexpect[39m(data[33m.[39mdata)[33m.[39m[34mtoEqual[39m(mockStats)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[54/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/app/api/__tests__/admin-api.test.ts[2m > [22mAdmin API Integration Tests[2m > [22mPUT /api/admin/claims/[id]/status[2m > [22mshould update claim status
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ 'CLM001', 'filed', undefined, â€¦(1) ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[2m    "CLM001",[22m
[2m    "filed",[22m
[32m-   undefined,[90m
[2m    "Claim filed with airline",[22m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2mâ¯[22m src/app/api/__tests__/admin-api.test.ts:[2m383:33[22m[39m
    [90m381| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
    [90m382| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m383| [39m      [34mexpect[39m(updateClaimStatus)[33m.[39m[34mtoHaveBeenCalledWith[39m(
    [90m   | [39m                                [31m^[39m
    [90m384| [39m        [32m'CLM001'[39m[33m,[39m
    [90m385| [39m        [32m'filed'[39m[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[55/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/app/api/__tests__/admin-api.test.ts[2m > [22mAdmin API Integration Tests[2m > [22mPUT /api/admin/claims/[id]/status[2m > [22mshould handle status update failure
[31m[1mAssertionError[22m: expected undefined to be false // Object.is equality[39m

[32m- Expected:[39m 
false

[31m+ Received:[39m 
undefined

[36m [2mâ¯[22m src/app/api/__tests__/admin-api.test.ts:[2m412:28[22m[39m
    [90m410| [39m
    [90m411| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m500[39m)[33m;[39m
    [90m412| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m413| [39m    })[33m;[39m
    [90m414| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[56/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/app/api/__tests__/admin-api.test.ts[2m > [22mAdmin API Integration Tests[2m > [22mPOST /api/admin/claims/[id]/follow-up[2m > [22mshould schedule follow-up
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ 'CLM001', '2024-02-15' ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[2m    "CLM001",[22m
[2m    "2024-02-15",[22m
[31m+   "reminder",[90m
[31m+   undefined,[90m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2mâ¯[22m src/app/api/__tests__/admin-api.test.ts:[2m473:32[22m[39m
    [90m471| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
    [90m472| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m473| [39m      expect(scheduleFollowUp).toHaveBeenCalledWith('CLM001', '2024-02â€¦
    [90m   | [39m                               [31m^[39m
    [90m474| [39m    })[33m;[39m
    [90m475| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[57/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/app/api/__tests__/admin-api.test.ts[2m > [22mAdmin API Integration Tests[2m > [22mGET /api/admin/airlines[2m > [22mshould return all airline configurations
[31m[1mAssertionError[22m: Target cannot be null or undefined.[39m
[36m [2mâ¯[22m src/app/api/__tests__/admin-api.test.ts:[2m498:34[22m[39m
    [90m496| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
    [90m497| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m498| [39m      [34mexpect[39m(data[33m.[39mdata[33m.[39mairlines)[33m.[39m[34mtoHaveLength[39m([34m2[39m)[33m;[39m
    [90m   | [39m                                 [31m^[39m
    [90m499| [39m      [34mexpect[39m(data[33m.[39mdata[33m.[39mtotal)[33m.[39m[34mtoBe[39m([34m2[39m)[33m;[39m
    [90m500| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[58/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/app/api/__tests__/admin-api.test.ts[2m > [22mAdmin API Integration Tests[2m > [22mGET /api/admin/airlines[2m > [22mshould filter airlines by submission method
[31m[1mAssertionError[22m: Target cannot be null or undefined.[39m
[36m [2mâ¯[22m src/app/api/__tests__/admin-api.test.ts:[2m521:34[22m[39m
    [90m519| [39m
    [90m520| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
    [90m521| [39m      [34mexpect[39m(data[33m.[39mdata[33m.[39mairlines)[33m.[39m[34mtoHaveLength[39m([34m1[39m)[33m;[39m
    [90m   | [39m                                 [31m^[39m
    [90m522| [39m      [34mexpect[39m(data[33m.[39mdata[33m.[39mairlines[[34m0[39m][33m.[39msubmissionMethod)[33m.[39m[34mtoBe[39m([32m'email'[39m)[33m;[39m
    [90m523| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[59/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/app/api/__tests__/admin-api.test.ts[2m > [22mAdmin API Integration Tests[2m > [22mError Handling[2m > [22mshould handle malformed JSON in request body
[31m[1mAssertionError[22m: expected 500 to be 400 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 400[39m
[31m+ 500[39m

[36m [2mâ¯[22m src/app/api/__tests__/admin-api.test.ts:[2m575:31[22m[39m
    [90m573| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m574| [39m
    [90m575| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m400[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m576| [39m      [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoContain[39m([32m'Invalid JSON'[39m)[33m;[39m
    [90m577| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[60/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/app/api/__tests__/admin-api.test.ts[2m > [22mAdmin API Integration Tests[2m > [22mError Handling[2m > [22mshould handle missing required fields
[31m[1mAssertionError[22m: expected 'airlineReference, filedBy, and filingâ€¦' to contain 'Missing required fields'[39m

Expected: [32m"Missing required fields"[39m
Received: [31m"airlineReference, filedBy, and filingMethod are required"[39m

[36m [2mâ¯[22m src/app/api/__tests__/admin-api.test.ts:[2m593:26[22m[39m
    [90m591| [39m
    [90m592| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m400[39m)[33m;[39m
    [90m593| [39m      [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoContain[39m([32m'Missing required fields'[39m)[33m;[39m
    [90m   | [39m                         [31m^[39m
    [90m594| [39m    })[33m;[39m
    [90m595| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[61/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/app/api/__tests__/admin-api.test.ts[2m > [22mAdmin API Integration Tests[2m > [22mError Handling[2m > [22mshould handle service errors gracefully
[31m[1mAssertionError[22m: expected undefined to be false // Object.is equality[39m

[32m- Expected:[39m 
false

[31m+ Received:[39m 
undefined

[36m [2mâ¯[22m src/app/api/__tests__/admin-api.test.ts:[2m609:28[22m[39m
    [90m607| [39m
    [90m608| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m500[39m)[33m;[39m
    [90m609| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m610| [39m      [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoContain[39m([32m'Error fetching claims'[39m)[33m;[39m
    [90m611| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[62/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/app/api/__tests__/create-claim.test.ts[2m > [22mPOST /api/create-claim[2m > [22mshould return 400 if files are missing
[31m[1mAssertionError[22m: expected 'Validation error' to be 'Missing required documents' // Object.is equality[39m

Expected: [32m"Missing required documents"[39m
Received: [31m"Validation error"[39m

[36m [2mâ¯[22m src/app/api/__tests__/create-claim.test.ts:[2m96:24[22m[39m
    [90m 94| [39m
    [90m 95| [39m    [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m400[39m)[33m;[39m
    [90m 96| [39m    [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoBe[39m([32m'Missing required documents'[39m)[33m;[39m
    [90m   | [39m                       [31m^[39m
    [90m 97| [39m  })[33m;[39m
    [90m 98| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[63/74]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/app/api/__tests__/create-claim.test.ts[2m > [22mPOST /api/create-claim[2m > [22mshould return 400 for invalid file types
[31m[1mAssertionError[22m: expected 'Validation error' to contain 'Invalid file type'[39m

Expected: [32m"[7mInv[27malid[7m file type[27m"[39m
Received: [31m"[7mV[27malid[7mation error[27m"[39m

[36m [2mâ¯[22m src/app/api/__tests__/create-claim.test.ts:[2m127:24[22m[39m
    [90m125| [39m
    [90m126| [39m    [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m400[39m)[33m;[39m
    [90m127| [39m    [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoContain[39m([32m'Invalid file type'[39m)[33m;[39m
    [90m   | [39m                       [31m^[39m
    [90m128| [39m  })[33m;[39m
    [90m129| [39m})[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[64/74]âŽ¯[22m[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Unhandled Errors [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m
[31m[1m
Vitest caught 1 unhandled error during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.[22m[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Unhandled Rejection [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m
[31m[1mTypeError[22m: __vite_ssr_import_3__.default.identify is not a function[39m
[36m [2mâ¯[22m handleSubmit src/components/FlightLookupForm.tsx:[2m347:15[22m[39m
    [90m345| [39m    [35mif[39m ([35mtypeof[39m window [33m!==[39m [32m'undefined'[39m) {
    [90m346| [39m      [90m// Identify user with their email[39m
    [90m347| [39m      posthog[33m.[39m[34midentify[39m(formData[33m.[39mpassengerEmail[33m.[39m[34mtrim[39m()[33m,[39m {
    [90m   | [39m              [31m^[39m
    [90m348| [39m        email[33m:[39m formData[33m.[39mpassengerEmail[33m.[39m[34mtrim[39m()[33m,[39m
    [90m349| [39m        first_name[33m:[39m formData[33m.[39mfirstName[33m.[39m[34mtrim[39m()[33m,[39m
[90m [2mâ¯[22m executeDispatch node_modules/react-dom/cjs/react-dom-client.development.js:[2m19116:9[22m[39m
[90m [2mâ¯[22m runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:[2m874:13[22m[39m
[90m [2mâ¯[22m processDispatchQueue node_modules/react-dom/cjs/react-dom-client.development.js:[2m19166:19[22m[39m
[90m [2mâ¯[22m node_modules/react-dom/cjs/react-dom-client.development.js:[2m19767:9[22m[39m
[90m [2mâ¯[22m batchedUpdates$1 node_modules/react-dom/cjs/react-dom-client.development.js:[2m3255:40[22m[39m
[90m [2mâ¯[22m dispatchEventForPluginEventSystem node_modules/react-dom/cjs/react-dom-client.development.js:[2m19320:7[22m[39m
[90m [2mâ¯[22m dispatchEvent node_modules/react-dom/cjs/react-dom-client.development.js:[2m23585:11[22m[39m
[90m [2mâ¯[22m dispatchDiscreteEvent node_modules/react-dom/cjs/react-dom-client.development.js:[2m23553:11[22m[39m
[90m [2mâ¯[22m HTMLDivElement.#callDispatchEventListeners node_modules/happy-dom/lib/event/EventTarget.js:[2m228:34[22m[39m

[31mThis error originated in "[1m__tests__/integration/formSubmission.test.tsx[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m
[31mThe latest test that might've caused the error is "[1mshould submit cancellation claim with alternative flight and structured timing[22m". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.[39m
[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m


[2m Test Files [22m [1m[31m13 failed[39m[22m[2m | [22m[1m[32m15 passed[39m[22m[90m (28)[39m
[2m      Tests [22m [1m[31m72 failed[39m[22m[2m | [22m[1m[32m436 passed[39m[22m[90m (508)[39m
[2m     Errors [22m [1m[31m1 error[39m[22m
[2m   Start at [22m 13:13:33
[2m   Duration [22m 7.00s[2m (transform 4.18s, setup 3.40s, collect 6.35s, tests 13.57s, environment 10.28s, prepare 303ms)[22m

